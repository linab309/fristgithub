###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.40194/W32 for 8051         25/Dec/2013  17:58:39 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\wise-house\Components\mt\MT_AF.c                #
#    Command line       =  -f E:\wise-house\Projects\zstack\Samples\WSN_senso #
#                          rs\CC2530DB\..\..\..\Tools\CC2530DB\f8wCoord.cfg   #
#                          (-DCPU32MHZ -DROOT=__near_func                     #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f E:\wise-house\Projects\zstack\Samples\WSN_senso #
#                          rs\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg  #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\wise-house\Components\mt #
#                          \MT_AF.c -D ZIGBEEPRO -D ZTOOL_P1 -D MT_TASK -D    #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -lC E:\wise-house\Projects\zstack\Samples\WSN_sens #
#                          ors\CC2530DB\CoordinatorEB-Pro\List\ -lA           #
#                          E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\CoordinatorEB-Pro\List\ --diag_suppress   #
#                          Pe001,Pa010 -o E:\wise-house\Projects\zstack\Sampl #
#                          es\WSN_sensors\CC2530DB\CoordinatorEB-Pro\Obj\ -e  #
#                          --debug --core=plain --dptr=16,1                   #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 8 -I  #
#                          E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\ -I E:\wise-house\Projects\zstack\Samples #
#                          \WSN_sensors\CC2530DB\..\SOURCE\ -I                #
#                          E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\..\..\..\ZMAIN\TI2530DB\ -I               #
#                          E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\..\..\..\..\..\COMPONENTS\MT\ -I          #
#                          E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\..\..\..\..\..\COMPONENTS\HAL\INCLUDE\    #
#                          -I E:\wise-house\Projects\zstack\Samples\WSN_senso #
#                          rs\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\TARGET\C #
#                          C2530EB\ -I E:\wise-house\Projects\zstack\Samples\ #
#                          WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\OSA #
#                          L\MCU\CCSOC\ -I E:\wise-house\Projects\zstack\Samp #
#                          les\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS #
#                          \OSAL\INCLUDE\ -I E:\wise-house\Projects\zstack\Sa #
#                          mples\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONEN #
#                          TS\STACK\AF\ -I E:\wise-house\Projects\zstack\Samp #
#                          les\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS #
#                          \STACK\NWK\ -I E:\wise-house\Projects\zstack\Sampl #
#                          es\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\ #
#                          STACK\SEC\ -I E:\wise-house\Projects\zstack\Sample #
#                          s\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\S #
#                          TACK\SAPI\ -I E:\wise-house\Projects\zstack\Sample #
#                          s\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\S #
#                          TACK\SYS\ -I E:\wise-house\Projects\zstack\Samples #
#                          \WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\ST #
#                          ACK\ZDO\ -I E:\wise-house\Projects\zstack\Samples\ #
#                          WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\ZMA #
#                          C\F8W\ -I E:\wise-house\Projects\zstack\Samples\WS #
#                          N_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC\ #
#                           -I E:\wise-house\Projects\zstack\Samples\WSN_sens #
#                          ors\CC2530DB\..\..\..\..\..\COMPONENTS\SERVICES\SA #
#                          DDR\ -I E:\wise-house\Projects\zstack\Samples\WSN_ #
#                          sensors\CC2530DB\..\..\..\..\..\COMPONENTS\SERVICE #
#                          S\SDATA\ -I E:\wise-house\Projects\zstack\Samples\ #
#                          WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\MAC #
#                          \INCLUDE\ -I E:\wise-house\Projects\zstack\Samples #
#                          \WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENTS\MA #
#                          C\HIGH_LEVEL\ -I E:\wise-house\Projects\zstack\Sam #
#                          ples\WSN_sensors\CC2530DB\..\..\..\..\..\COMPONENT #
#                          S\MAC\LOW_LEVEL\srf04\ -I                          #
#                          E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\s #
#                          rf04\SINGLE_CHIP\ -Ohz --require_prototypes        #
#    List file          =  E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\CoordinatorEB-Pro\List\MT_AF.lst          #
#    Object file        =  E:\wise-house\Projects\zstack\Samples\WSN_sensors\ #
#                          CC2530DB\CoordinatorEB-Pro\Obj\MT_AF.r51           #
#                                                                             #
#                                                                             #
###############################################################################

E:\wise-house\Components\mt\MT_AF.c
      1          /**************************************************************************************************
      2            Filename:       MT_AF.c
      3            Revised:        $Date: 2011-05-27 16:00:27 -0700 (Fri, 27 May 2011) $
      4            Revision:       $Revision: 26145 $
      5          
      6          
      7            Description:    MonitorTest functions for the AF layer.
      8          
      9          
     10            Copyright 2007-2011 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com.
     39          
     40          **************************************************************************************************/
     41          
     42          /* ------------------------------------------------------------------------------------------------
     43           *                                          Includes
     44           * ------------------------------------------------------------------------------------------------
     45           */
     46          #include "ZComDef.h"
     47          #include "OSAL.h"
     48          #include "MT.h"
     49          #include "MT_AF.h"
     50          #include "MT_ZDO.h"
     51          #include "nwk.h"
     52          #include "OnBoard.h"
     53          #include "MT_UART.h"
     54          
     55          #if defined INTER_PAN
     56          #include "stub_aps.h"
     57          #endif
     58          
     59          /* ------------------------------------------------------------------------------------------------
     60           *                                          Constants
     61           * ------------------------------------------------------------------------------------------------
     62           */
     63          
     64          #if !defined MT_AF_EXEC_CNT
     65          #define MT_AF_EXEC_CNT  15
     66          #endif
     67          
     68          #if !defined MT_AF_EXEC_DLY
     69          #define MT_AF_EXEC_DLY  1000
     70          #endif
     71          
     72          /* ------------------------------------------------------------------------------------------------
     73           *                                           Typedefs
     74           * ------------------------------------------------------------------------------------------------
     75           */
     76          
     77          typedef struct
     78          {
     79            uint8 *data;
     80            afAddrType_t dstAddr;
     81            endPointDesc_t *epDesc;
     82            uint16 cId;
     83            uint16 dataLen;
     84            uint8 transId;
     85            uint8 txOpts;
     86            uint8 radius;
     87            uint8 tick;
     88          } mtAfDataReq_t;
     89          
     90          typedef struct _mtAfInMsgList_t
     91          {
     92            struct _mtAfInMsgList_t *next;
     93            uint8 *data;
     94            uint32 timestamp;         // Receipt timestamp from MAC.
     95            uint8 tick;
     96          } mtAfInMsgList_t;
     97          
     98          /* ------------------------------------------------------------------------------------------------
     99           *                                        Local Variables
    100           * ------------------------------------------------------------------------------------------------
    101           */
    102          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    103          mtAfInMsgList_t *pMtAfInMsgList = NULL;
   \                     pMtAfInMsgList:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    104          mtAfDataReq_t *pMtAfDataReq = NULL;
   \                     pMtAfDataReq:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    105          
    106          /* ------------------------------------------------------------------------------------------------
    107           *                                        Global Variables
    108           * ------------------------------------------------------------------------------------------------
    109           */
    110          
    111          #if defined ( MT_AF_CB_FUNC )
    112          uint16 _afCallbackSub;
    113          #endif
    114          
    115          /* ------------------------------------------------------------------------------------------------
    116           *                                        Local Functions
    117           * ------------------------------------------------------------------------------------------------
    118           */
    119          
    120          void MT_AfRegister(uint8 *pBuf);
    121          void MT_AfDataRequest(uint8 *pBuf);
    122          
    123          #if defined ( ZIGBEE_SOURCE_ROUTING )
    124          void MT_AfDataRequestSrcRtg(uint8 *pBuf);
    125          #endif
    126          
    127          #if defined INTER_PAN
    128          static void MT_AfInterPanCtl(uint8 *pBuf);
    129          #endif
    130          
    131          static void MT_AfDataRetrieve(uint8 *pBuf);
    132          static void MT_AfDataStore(uint8 *pBuf);
    133          static void MT_AfAPSF_ConfigSet(uint8 *pBuf);
    134          
    135          /**************************************************************************************************
    136           * @fn          MT_AfExec
    137           *
    138           * @brief       This function is invoked by an MT timer event.
    139           *
    140           * input parameters
    141           *
    142           * None.
    143           *
    144           * output parameters
    145           *
    146           * None.
    147           *
    148           * @return      None.
    149           **************************************************************************************************
    150           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    151          void MT_AfExec(void)
   \                     MT_AfExec:
    152          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    153            mtAfInMsgList_t *pPrev, *pItem = pMtAfInMsgList;
   \                     ??MT_AfExec_0:
   \   000005   90....       MOV     DPTR,#pMtAfInMsgList
   \   000008   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_136:
   \   00000B   8007         SJMP    ??MT_AfExec_1
    154          
    155            while (pItem != NULL)
    156            {
    157              if (--(pItem->tick) == 0)
    158              {
    159                if (pMtAfInMsgList == pItem)
    160                {
    161                  pMtAfInMsgList = pItem->next;
    162                  (void)osal_mem_free(pItem);
    163                  pItem = pMtAfInMsgList;
    164                }
    165                else
    166                {
    167                  pPrev->next = pItem->next;
    168                  (void)osal_mem_free(pItem);
    169                  pItem = pPrev->next;
    170                }
    171              }
    172              else
    173              {
    174                pPrev = pItem;
   \                     ??MT_AfExec_2:
   \   00000D   EA           MOV     A,R2
   \   00000E   FE           MOV     R6,A
   \   00000F   EB           MOV     A,R3
   \   000010   FF           MOV     R7,A
    175                pItem = pItem->next;
   \   000011   E8           MOV     A,R0
   \   000012   FA           MOV     R2,A
   \   000013   E9           MOV     A,R1
   \                     ??MT_AfExec_1:
   \   000014   FB           MOV     R3,A
    176              }
   \   000015   EA           MOV     A,R2
   \   000016   4B           ORL     A,R3
   \   000017   6047         JZ      ??MT_AfExec_3
   \   000019   EA           MOV     A,R2
   \   00001A   2408         ADD     A,#0x8
   \   00001C   F8           MOV     R0,A
   \   00001D   EB           MOV     A,R3
   \   00001E   3400         ADDC    A,#0x0
   \   000020   F9           MOV     R1,A
   \   000021   E8           MOV     A,R0
   \   000022   FC           MOV     R4,A
   \   000023   E9           MOV     A,R1
   \   000024   FD           MOV     R5,A
   \   000025   8C82         MOV     DPL,R4
   \   000027   8D83         MOV     DPH,R5
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   14           DEC     A
   \   00002B   F0           MOVX    @DPTR,A
   \   00002C   8A82         MOV     DPL,R2
   \   00002E   8B83         MOV     DPH,R3
   \   000030   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_196:
   \   000033   8C82         MOV     DPL,R4
   \   000035   8D83         MOV     DPH,R5
   \   000037   E0           MOVX    A,@DPTR
   \   000038   70D3         JNZ     ??MT_AfExec_2
   \   00003A   90....       MOV     DPTR,#pMtAfInMsgList
   \   00003D   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   000040   EA           MOV     A,R2
   \   000041   6C           XRL     A,R4
   \   000042   7002         JNZ     ??MT_AfExec_4
   \   000044   EB           MOV     A,R3
   \   000045   6D           XRL     A,R5
   \                     ??MT_AfExec_4:
   \   000046   7008         JNZ     ??MT_AfExec_5
   \   000048   90....       MOV     DPTR,#pMtAfInMsgList
   \   00004B   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   00004E   80B5         SJMP    ??MT_AfExec_0
   \                     ??MT_AfExec_5:
   \   000050   8E82         MOV     DPL,R6
   \   000052   8F83         MOV     DPH,R7
   \   000054   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000057   8E82         MOV     DPL,R6
   \   000059   8F83         MOV     DPH,R7
   \   00005B   12....       LCALL   ?Subroutine58 & 0xFFFF
    177            }
   \                     ??CrossCallReturnLabel_137:
   \   00005E   80B4         SJMP    ??MT_AfExec_1
    178          
    179            if (pMtAfDataReq != NULL)
   \                     ??MT_AfExec_3:
   \   000060   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_191:
   \   000063   600E         JZ      ??MT_AfExec_6
    180            {
    181              if (--(pMtAfDataReq->tick) == 0)
   \   000065   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_210:
   \   000068   14           DEC     A
   \   000069   F0           MOVX    @DPTR,A
   \   00006A   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_211:
   \   00006D   7004         JNZ     ??MT_AfExec_6
    182              {
    183                (void)osal_mem_free(pMtAfDataReq);
   \   00006F                ; Setup parameters for call to function osal_mem_free
   \   00006F   12....       LCALL   ?Subroutine13 & 0xFFFF
    184                pMtAfDataReq = NULL;
    185              }
    186            }
   \                     ??CrossCallReturnLabel_14:
   \   000072   F0           MOVX    @DPTR,A
    187          
    188            if ((pMtAfInMsgList != NULL) || (pMtAfDataReq != NULL))
   \                     ??MT_AfExec_6:
   \   000073   90....       MOV     DPTR,#pMtAfInMsgList
   \   000076   12....       LCALL   ??Subroutine78_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_185:
   \   000079   7005         JNZ     ??MT_AfExec_7
   \   00007B   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_192:
   \   00007E   6008         JZ      ??CrossCallReturnLabel_44
    189            {
    190              if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \                     ??MT_AfExec_7:
   \   000080                ; Setup parameters for call to function osal_start_timerEx
   \   000080   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_120:
   \   000083   6003         JZ      ??CrossCallReturnLabel_44
    191              {
    192                osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   000085                ; Setup parameters for call to function osal_set_event
   \   000085   12....       LCALL   ?Subroutine27 & 0xFFFF
    193              }
    194            }
    195          }
   \                     ??CrossCallReturnLabel_44:
   \   000088                REQUIRE ?Subroutine0
   \   000088                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005                ; Setup parameters for call to function osal_mem_free
   \   000005                ; Setup parameters for call to function osal_mem_free
   \   000005   12....       LCALL   ??osal_mem_free?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   7A08         MOV     R2,#0x8
   \   000002   7B00         MOV     R3,#0x0
   \   000004   90....       MOV     DPTR,#MT_TaskID
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F9           MOV     R1,A
   \   000009   12....       LCALL   ??osal_set_event?relay
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine65_0:
   \   000000   7CE8         MOV     R4,#-0x18
   \   000002   7D03         MOV     R5,#0x3
   \   000004   7A08         MOV     R2,#0x8
   \   000006   7B00         MOV     R3,#0x0
   \   000008   90....       MOV     DPTR,#MT_TaskID
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F9           MOV     R1,A
   \   00000D   12....       LCALL   ??osal_start_timerEx?relay
   \   000010   E9           MOV     A,R1
   \   000011   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine58:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FC           MOV     R4,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FD           MOV     R5,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine54:
   \   000000   12....       LCALL   ?Subroutine59 & 0xFFFF
   \                     ??CrossCallReturnLabel_215:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine59:
   \   000000   F8           MOV     R0,A
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   3400         ADDC    A,#0x0
   \   000005   F9           MOV     R1,A
   \   000006   8882         MOV     DPL,R0
   \   000008   8983         MOV     DPH,R1
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine51:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine50:
   \   000000   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_140:
   \   000003   FB           MOV     R3,A
   \   000004   12....       LCALL   ??osal_mem_free?relay
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   90....       MOV     DPTR,#pMtAfDataReq
   \   000003                REQUIRE ??Subroutine78_0
   \   000003                ; // Fall through to label ??Subroutine78_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine78_0:
   \   000000   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_199:
   \   000003   E8           MOV     A,R0
   \   000004   49           ORL     A,R1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   90....       MOV     DPTR,#pMtAfDataReq
   \   000003   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000006   90....       MOV     DPTR,#pMtAfDataReq
   \   000009   E4           CLR     A
   \   00000A   F0           MOVX    @DPTR,A
   \   00000B   A3           INC     DPTR
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   90....       MOV     DPTR,#pMtAfDataReq
   \   000003   E0           MOVX    A,@DPTR
   \   000004   2417         ADD     A,#0x17
   \   000006                REQUIRE ??Subroutine80_0
   \   000006                ; // Fall through to label ??Subroutine80_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine80_0:
   \   000000   12....       LCALL   ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_213:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET
    196          
    197          /***************************************************************************************************
    198           * @fn      MT_AfCommandProcessing
    199           *
    200           * @brief   Process all the AF commands that are issued by test tool
    201           *
    202           * @param   pBuf - pointer to the received buffer
    203           *
    204           * @return  status
    205           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    206          uint8 MT_AfCommandProcessing(uint8 *pBuf)
   \                     MT_AfCommandProcessing:
    207          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   F8           MOV     R0,A
   \   00000C   EB           MOV     A,R3
   \   00000D   F9           MOV     R1,A
    208            uint8 status = MT_RPC_SUCCESS;
   \   00000E   7E00         MOV     R6,#0x0
    209          
    210            switch (pBuf[MT_RPC_POS_CMD1])
   \   000010   8882         MOV     DPL,R0
   \   000012   8983         MOV     DPH,R1
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   6015         JZ      ??MT_AfCommandProcessing_0
   \   000019   14           DEC     A
   \   00001A   6017         JZ      ??MT_AfCommandProcessing_1
   \   00001C   14           DEC     A
   \   00001D   6014         JZ      ??MT_AfCommandProcessing_1
   \   00001F   14           DEC     A
   \   000020   6016         JZ      ??MT_AfCommandProcessing_2
   \   000022   24F2         ADD     A,#-0xe
   \   000024   601C         JZ      ??MT_AfCommandProcessing_3
   \   000026   14           DEC     A
   \   000027   6014         JZ      ??MT_AfCommandProcessing_4
   \   000029   14           DEC     A
   \   00002A   601B         JZ      ??MT_AfCommandProcessing_5
   \   00002C   806C         SJMP    ??MT_AfCommandProcessing_6
    211            {
    212              case MT_AF_REGISTER:
    213                MT_AfRegister(pBuf);
   \                     ??MT_AfCommandProcessing_0:
   \   00002E                ; Setup parameters for call to function MT_AfRegister
   \   00002E   12....       LCALL   ??MT_AfRegister?relay
    214                break;
   \   000031   8069         SJMP    ??MT_AfCommandProcessing_7
    215          
    216              case MT_AF_DATA_REQUEST:
    217              case MT_AF_DATA_REQUEST_EXT:
    218                MT_AfDataRequest(pBuf);
   \                     ??MT_AfCommandProcessing_1:
   \   000033                ; Setup parameters for call to function MT_AfDataRequest
   \   000033   12....       LCALL   ??MT_AfDataRequest?relay
    219                break;
   \   000036   8064         SJMP    ??MT_AfCommandProcessing_7
    220          
    221          #if defined ( ZIGBEE_SOURCE_ROUTING )
    222              case MT_AF_DATA_REQUEST_SRCRTG:
    223                MT_AfDataRequestSrcRtg(pBuf);
   \                     ??MT_AfCommandProcessing_2:
   \   000038                ; Setup parameters for call to function MT_AfDataRequestSrcRtg
   \   000038   12....       LCALL   ??MT_AfDataRequestSrcRtg?relay
    224                break;
   \   00003B   805F         SJMP    ??MT_AfCommandProcessing_7
    225          #endif
    226          
    227          #if defined INTER_PAN
    228              case MT_AF_INTER_PAN_CTL:
    229                MT_AfInterPanCtl(pBuf);
    230                break;
    231          #endif
    232          
    233              case MT_AF_DATA_RETRIEVE:
    234                MT_AfDataRetrieve(pBuf);
   \                     ??MT_AfCommandProcessing_4:
   \   00003D                ; Setup parameters for call to function MT_AfDataRetrieve
   \   00003D   12....       LCALL   ??MT_AfDataRetrieve?relay
    235                break;
   \   000040   805A         SJMP    ??MT_AfCommandProcessing_7
    236          
    237              case MT_AF_DATA_STORE:
    238                MT_AfDataStore(pBuf);
   \                     ??MT_AfCommandProcessing_3:
   \   000042                ; Setup parameters for call to function MT_AfDataStore
   \   000042   12....       LCALL   ??MT_AfDataStore?relay
    239                break;
   \   000045   8055         SJMP    ??MT_AfCommandProcessing_7
    240          
    241              case MT_AF_APSF_CONFIG_SET:
    242                MT_AfAPSF_ConfigSet(pBuf);
   \                     ??MT_AfCommandProcessing_5:
   \   000047   8882         MOV     DPL,R0
   \   000049   8983         MOV     DPH,R1
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   C0E0         PUSH    A
   \   000052   7401         MOV     A,#0x1
   \   000054   12....       LCALL   ?XSTACK_DISP0_8
   \   000057   D0E0         POP     A
   \   000059   F0           MOVX    @DPTR,A
   \   00005A   8882         MOV     DPL,R0
   \   00005C   8983         MOV     DPH,R1
   \   00005E   A3           INC     DPTR
   \   00005F   A3           INC     DPTR
   \   000060   A3           INC     DPTR
   \   000061   A3           INC     DPTR
   \   000062   A3           INC     DPTR
   \   000063   E0           MOVX    A,@DPTR
   \   000064   C0E0         PUSH    A
   \   000066   7402         MOV     A,#0x2
   \   000068   12....       LCALL   ?XSTACK_DISP0_8
   \   00006B   D0E0         POP     A
   \   00006D   F0           MOVX    @DPTR,A
   \   00006E                ; Setup parameters for call to function afAPSF_ConfigSet
   \   00006E   7401         MOV     A,#0x1
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   AA82         MOV     R2,DPL
   \   000075   AB83         MOV     R3,DPH
   \   000077   8882         MOV     DPL,R0
   \   000079   8983         MOV     DPH,R1
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   A3           INC     DPTR
   \   00007E   E0           MOVX    A,@DPTR
   \   00007F   F9           MOV     R1,A
   \   000080   12....       LCALL   ??afAPSF_ConfigSet?relay
   \   000083   E9           MOV     A,R1
   \   000084   85..82       MOV     DPL,?XSP + 0
   \   000087   85..83       MOV     DPH,?XSP + 1
   \   00008A   F0           MOVX    @DPTR,A
   \   00008B                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00008B   AC82         MOV     R4,DPL
   \   00008D   AD83         MOV     R5,DPH
   \   00008F   7B01         MOV     R3,#0x1
   \   000091   7A13         MOV     R2,#0x13
   \   000093   7964         MOV     R1,#0x64
   \   000095   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    243                break;
   \   000098   8002         SJMP    ??MT_AfCommandProcessing_7
    244          
    245              default:
    246                status = MT_RPC_ERR_COMMAND_ID;
   \                     ??MT_AfCommandProcessing_6:
   \   00009A   0E           INC     R6
   \   00009B   0E           INC     R6
    247                break;
    248            }
    249          
    250            return status;
   \                     ??MT_AfCommandProcessing_7:
   \   00009C   EE           MOV     A,R6
   \   00009D   F9           MOV     R1,A
   \   00009E   7403         MOV     A,#0x3
   \   0000A0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000A3   02....       LJMP    ?Subroutine0 & 0xFFFF
    251          }
    252          
    253          /***************************************************************************************************
    254           * @fn      MT_AfRegister
    255           *
    256           * @brief   Process AF Register command
    257           *
    258           * @param   pBuf - pointer to the received buffer
    259           *
    260           * @return  none
    261           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    262          void MT_AfRegister(uint8 *pBuf)
   \                     MT_AfRegister:
    263          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 2,R2
   \   00000C   8B..         MOV     ?V0 + 3,R3
    264            uint8 cmdId;
    265            uint8 retValue = ZMemError;
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   7410         MOV     A,#0x10
   \   000016   12....       LCALL   ?Subroutine35 & 0xFFFF
    266            endPointDesc_t *epDesc;
    267          
    268            /* parse header */
    269            cmdId = pBuf[MT_RPC_POS_CMD1];
   \                     ??CrossCallReturnLabel_57:
   \   000019   F5..         MOV     ?V0 + 0,A
    270            pBuf += MT_RPC_FRAME_HDR_SZ;
    271          
    272            epDesc = (endPointDesc_t *)osal_mem_alloc(sizeof(endPointDesc_t));
   \   00001B                ; Setup parameters for call to function osal_mem_alloc
   \   00001B   7A06         MOV     R2,#0x6
   \   00001D   7B00         MOV     R3,#0x0
   \   00001F   12....       LCALL   ??osal_mem_alloc?relay
   \   000022   8A..         MOV     ?V0 + 4,R2
   \   000024   8B..         MOV     ?V0 + 5,R3
   \   000026   AE..         MOV     R6,?V0 + 4
   \   000028   AF..         MOV     R7,?V0 + 5
    273            if ( epDesc )
   \   00002A   EE           MOV     A,R6
   \   00002B   4F           ORL     A,R7
   \   00002C   6040         JZ      ??MT_AfRegister_0
    274            {
    275              epDesc->task_id = &MT_TaskID;
   \   00002E   8E82         MOV     DPL,R6
   \   000030   8F83         MOV     DPH,R7
   \   000032   A3           INC     DPTR
   \   000033   74..         MOV     A,#MT_TaskID & 0xff
   \   000035   F0           MOVX    @DPTR,A
   \   000036   A3           INC     DPTR
   \   000037   74..         MOV     A,#(MT_TaskID >> 8) & 0xff
   \   000039   F0           MOVX    @DPTR,A
    276              retValue = MT_BuildEndpointDesc( pBuf, epDesc );
   \   00003A                ; Setup parameters for call to function MT_BuildEndpointDesc
   \   00003A   EE           MOV     A,R6
   \   00003B   FC           MOV     R4,A
   \   00003C   EF           MOV     A,R7
   \   00003D   FD           MOV     R5,A
   \   00003E   E5..         MOV     A,?V0 + 2
   \   000040   2403         ADD     A,#0x3
   \   000042   FA           MOV     R2,A
   \   000043   E5..         MOV     A,?V0 + 3
   \   000045   3400         ADDC    A,#0x0
   \   000047   FB           MOV     R3,A
   \   000048   12....       LCALL   ??MT_BuildEndpointDesc?relay
   \   00004B   E9           MOV     A,R1
   \   00004C   85..82       MOV     DPL,?XSP + 0
   \   00004F   85..83       MOV     DPH,?XSP + 1
   \   000052   F0           MOVX    @DPTR,A
    277              if ( retValue == ZSuccess )
   \   000053   700F         JNZ     ??MT_AfRegister_1
    278              {
    279                retValue = afRegister( epDesc );
   \   000055                ; Setup parameters for call to function afRegister
   \   000055   EE           MOV     A,R6
   \   000056   FA           MOV     R2,A
   \   000057   EF           MOV     A,R7
   \   000058   FB           MOV     R3,A
   \   000059   12....       LCALL   ??afRegister?relay
   \   00005C   E9           MOV     A,R1
   \   00005D   85..82       MOV     DPL,?XSP + 0
   \   000060   85..83       MOV     DPH,?XSP + 1
   \   000063   F0           MOVX    @DPTR,A
    280              }
    281          
    282              if ( retValue != ZSuccess )
   \                     ??MT_AfRegister_1:
   \   000064   E0           MOVX    A,@DPTR
   \   000065   6007         JZ      ??MT_AfRegister_0
    283              {
    284                osal_mem_free( epDesc );
   \   000067                ; Setup parameters for call to function osal_mem_free
   \   000067   EE           MOV     A,R6
   \   000068   FA           MOV     R2,A
   \   000069   EF           MOV     A,R7
   \   00006A   FB           MOV     R3,A
   \   00006B   12....       LCALL   ??osal_mem_free?relay
    285              }
    286            }
    287          
    288            /* Build and send back the response */
    289            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
   \                     ??MT_AfRegister_0:
   \   00006E                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00006E   85..82       MOV     DPL,?XSP + 0
   \   000071   85..83       MOV     DPH,?XSP + 1
   \   000074   AC82         MOV     R4,DPL
   \   000076   AD83         MOV     R5,DPH
   \   000078   7B01         MOV     R3,#0x1
   \   00007A   AA..         MOV     R2,?V0 + 0
   \   00007C   7964         MOV     R1,#0x64
   \   00007E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    290          }
   \   000081   7401         MOV     A,#0x1
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7F06         MOV     R7,#0x6
   \   000088   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET
    291          
    292          /***************************************************************************************************
    293           * @fn      MT_AfDataRequest
    294           *
    295           * @brief   Process AF Register command
    296           *
    297           * @param   pBuf - pointer to the received buffer
    298           *
    299           * @return  none
    300           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    301          void MT_AfDataRequest(uint8 *pBuf)
   \                     MT_AfDataRequest:
    302          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    303            #define MT_AF_REQ_MSG_LEN  10
    304            #define MT_AF_REQ_MSG_EXT  10
    305          
    306            endPointDesc_t *epDesc;
    307            afAddrType_t dstAddr;
    308            cId_t cId;
    309            uint8 transId, txOpts, radius;
    310            uint8 cmd0, cmd1;
    311            uint8 retValue = ZFailure;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   7401         MOV     A,#0x1
   \   000012   12....       LCALL   ?Subroutine41 & 0xFFFF
    312            uint16 dataLen, tempLen;
    313          
    314            /* Parse header */
    315            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \                     ??CrossCallReturnLabel_72:
   \   000015   E0           MOVX    A,@DPTR
   \   000016   C0E0         PUSH    A
   \   000018   7406         MOV     A,#0x6
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   D0E0         POP     A
   \   00001F   12....       LCALL   ?Subroutine35 & 0xFFFF
    316            cmd1 = pBuf[MT_RPC_POS_CMD1];
   \                     ??CrossCallReturnLabel_58:
   \   000022   C0E0         PUSH    A
   \   000024   7401         MOV     A,#0x1
   \   000026   12....       LCALL   ?XSTACK_DISP0_8
   \   000029   D0E0         POP     A
   \   00002B   F0           MOVX    @DPTR,A
    317            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00002C   EA           MOV     A,R2
   \   00002D   2403         ADD     A,#0x3
   \   00002F   F5..         MOV     ?V0 + 0,A
   \   000031   EB           MOV     A,R3
   \   000032   12....       LCALL   ??Subroutine68_0 & 0xFFFF
    318          
    319            if (cmd1 == MT_AF_DATA_REQUEST_EXT)
   \                     ??CrossCallReturnLabel_126:
   \   000035   85..82       MOV     DPL,?V0 + 0
   \   000038   F583         MOV     DPH,A
   \   00003A   A3           INC     DPTR
   \   00003B   A882         MOV     R0,DPL
   \   00003D   A983         MOV     R1,DPH
   \   00003F   7401         MOV     A,#0x1
   \   000041   12....       LCALL   ?XSTACK_DISP0_8
   \   000044   E0           MOVX    A,@DPTR
   \   000045   6402         XRL     A,#0x2
   \   000047   706C         JNZ     ??MT_AfDataRequest_0
    320            {
    321              dstAddr.addrMode = (afAddrMode_t)*pBuf++;
   \   000049   85..82       MOV     DPL,?V0 + 0
   \   00004C   85..83       MOV     DPH,?V0 + 1
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   FA           MOV     R2,A
   \   000051   740F         MOV     A,#0xf
   \   000053   12....       LCALL   ?XSTACK_DISP0_8
   \   000056   EA           MOV     A,R2
   \   000057   F0           MOVX    @DPTR,A
   \   000058   88..         MOV     ?V0 + 0,R0
   \   00005A   89..         MOV     ?V0 + 1,R1
    322          
    323              if (dstAddr.addrMode == afAddr64Bit)
   \   00005C   7403         MOV     A,#0x3
   \   00005E   6A           XRL     A,R2
   \   00005F   7021         JNZ     ??MT_AfDataRequest_1
    324              {
    325                (void)osal_memcpy(dstAddr.addr.extAddr, pBuf, Z_EXTADDR_LEN);
   \   000061                ; Setup parameters for call to function osal_memcpy
   \   000061   88..         MOV     ?V0 + 4,R0
   \   000063   89..         MOV     ?V0 + 5,R1
   \   000065   75..00       MOV     ?V0 + 6,#0x0
   \   000068   78..         MOV     R0,#?V0 + 4
   \   00006A   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00006D   7C08         MOV     R4,#0x8
   \   00006F   7D00         MOV     R5,#0x0
   \   000071   740A         MOV     A,#0xa
   \   000073   12....       LCALL   ?XSTACK_DISP0_8
   \   000076   AA82         MOV     R2,DPL
   \   000078   AB83         MOV     R3,DPH
   \   00007A   12....       LCALL   ??Subroutine75_0 & 0xFFFF
    326              }
   \                     ??CrossCallReturnLabel_173:
   \   00007D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000080   800F         SJMP    ??CrossCallReturnLabel_81
    327              else
    328              {
    329                dstAddr.addr.shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??MT_AfDataRequest_1:
   \   000082   8882         MOV     DPL,R0
   \   000084   8983         MOV     DPH,R1
   \   000086   12....       LCALL   ?Subroutine17 & 0xFFFF
    330              }
   \                     ??CrossCallReturnLabel_27:
   \   000089   7407         MOV     A,#0x7
   \   00008B   12....       LCALL   ?XSTACK_DISP0_8
   \   00008E   12....       LCALL   ?Subroutine44 & 0xFFFF
    331              pBuf += Z_EXTADDR_LEN;
   \                     ??CrossCallReturnLabel_81:
   \   000091   E5..         MOV     A,?V0 + 0
   \   000093   2408         ADD     A,#0x8
   \   000095   12....       LCALL   ??Subroutine63_0 & 0xFFFF
    332          
    333              dstAddr.endPoint = *pBuf++;
   \                     ??CrossCallReturnLabel_116:
   \   000098   C0E0         PUSH    A
   \   00009A   7410         MOV     A,#0x10
   \   00009C   12....       LCALL   ?XSTACK_DISP0_8
   \   00009F   D0E0         POP     A
   \   0000A1   12....       LCALL   ?Subroutine34 & 0xFFFF
    334              dstAddr.panId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_55:
   \   0000A4   12....       LCALL   ?Subroutine17 & 0xFFFF
    335              pBuf += 2;
    336            }
   \                     ??CrossCallReturnLabel_28:
   \   0000A7   7411         MOV     A,#0x11
   \   0000A9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AC   E8           MOV     A,R0
   \   0000AD   F0           MOVX    @DPTR,A
   \   0000AE   A3           INC     DPTR
   \   0000AF   E9           MOV     A,R1
   \   0000B0   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_124:
   \   0000B3   802F         SJMP    ??MT_AfDataRequest_2
    337            else
    338            {
    339              /* Destination address */
    340              dstAddr.addrMode = afAddr16Bit;
   \                     ??MT_AfDataRequest_0:
   \   0000B5   740F         MOV     A,#0xf
   \   0000B7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BA   12....       LCALL   ?Subroutine40 & 0xFFFF
    341              dstAddr.addr.shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_109:
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   FA           MOV     R2,A
   \   0000BF   8882         MOV     DPL,R0
   \   0000C1   8983         MOV     DPH,R1
   \   0000C3   E0           MOVX    A,@DPTR
   \   0000C4   F9           MOV     R1,A
   \   0000C5   EA           MOV     A,R2
   \   0000C6   F8           MOV     R0,A
   \   0000C7   7407         MOV     A,#0x7
   \   0000C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CC   12....       LCALL   ?Subroutine29 & 0xFFFF
    342              pBuf += 2;
    343          
    344              /* Destination endpoint */
    345              dstAddr.endPoint = *pBuf++;
   \                     ??CrossCallReturnLabel_112:
   \   0000CF   C0E0         PUSH    A
   \   0000D1   7410         MOV     A,#0x10
   \   0000D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D6   D0E0         POP     A
   \   0000D8   12....       LCALL   ?Subroutine34 & 0xFFFF
    346              dstAddr.panId = 0;
   \                     ??CrossCallReturnLabel_56:
   \   0000DB   7411         MOV     A,#0x11
   \   0000DD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E0   E4           CLR     A
   \   0000E1   F0           MOVX    @DPTR,A
   \   0000E2   A3           INC     DPTR
   \   0000E3   F0           MOVX    @DPTR,A
    347            }
    348          
    349            /* Source endpoint */
    350            epDesc = afFindEndPointDesc(*pBuf++);
   \                     ??MT_AfDataRequest_2:
   \   0000E4                ; Setup parameters for call to function afFindEndPointDesc
   \   0000E4   85..82       MOV     DPL,?V0 + 0
   \   0000E7   85..83       MOV     DPH,?V0 + 1
   \   0000EA   E0           MOVX    A,@DPTR
   \   0000EB   F9           MOV     R1,A
   \   0000EC   12....       LCALL   ??afFindEndPointDesc?relay
   \   0000EF   7404         MOV     A,#0x4
   \   0000F1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F4   EA           MOV     A,R2
   \   0000F5   F0           MOVX    @DPTR,A
   \   0000F6   A3           INC     DPTR
   \   0000F7   EB           MOV     A,R3
   \   0000F8   12....       LCALL   ?Subroutine32 & 0xFFFF
    351          
    352            /* ClusterId */
    353            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_52:
   \   0000FB   FA           MOV     R2,A
   \   0000FC   A3           INC     DPTR
   \   0000FD   E0           MOVX    A,@DPTR
   \   0000FE   F9           MOV     R1,A
   \   0000FF   EA           MOV     A,R2
   \   000100   2400         ADD     A,#0x0
   \   000102   F5..         MOV     ?V0 + 4,A
   \   000104   E4           CLR     A
   \   000105   39           ADDC    A,R1
   \   000106   F5..         MOV     ?V0 + 5,A
    354            pBuf +=2;
   \   000108   12....       LCALL   ??Subroutine62_0 & 0xFFFF
    355          
    356            /* TransId */
    357            transId = *pBuf++;
   \                     ??CrossCallReturnLabel_114:
   \   00010B   C0E0         PUSH    A
   \   00010D   7402         MOV     A,#0x2
   \   00010F   12....       LCALL   ?XSTACK_DISP0_8
   \   000112   D0E0         POP     A
   \   000114   12....       LCALL   ?Subroutine32 & 0xFFFF
    358          
    359            /* TxOption */
    360            txOpts = *pBuf++;
   \                     ??CrossCallReturnLabel_53:
   \   000117   C0E0         PUSH    A
   \   000119   7403         MOV     A,#0x3
   \   00011B   12....       LCALL   ?XSTACK_DISP0_8
   \   00011E   D0E0         POP     A
   \   000120   12....       LCALL   ?Subroutine36 & 0xFFFF
    361          
    362            /* Radius */
    363            radius = *pBuf++;
   \                     ??CrossCallReturnLabel_60:
   \   000123   8582..       MOV     ?V0 + 0,DPL
   \   000126   8583..       MOV     ?V0 + 1,DPH
    364          
    365            /* Length */
    366            if (cmd1 == MT_AF_DATA_REQUEST_EXT)
   \   000129   A3           INC     DPTR
   \   00012A   A882         MOV     R0,DPL
   \   00012C   A983         MOV     R1,DPH
   \   00012E   85..82       MOV     DPL,?V0 + 0
   \   000131   85..83       MOV     DPH,?V0 + 1
   \   000134   E0           MOVX    A,@DPTR
   \   000135   F5..         MOV     ?V0 + 6,A
   \   000137   7401         MOV     A,#0x1
   \   000139   12....       LCALL   ?XSTACK_DISP0_8
   \   00013C   E0           MOVX    A,@DPTR
   \   00013D   6402         XRL     A,#0x2
   \   00013F   7018         JNZ     ??MT_AfDataRequest_3
    367            {
    368              dataLen = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   000141   8882         MOV     DPL,R0
   \   000143   8983         MOV     DPH,R1
   \   000145   E0           MOVX    A,@DPTR
   \   000146   F9           MOV     R1,A
   \   000147   E5..         MOV     A,?V0 + 6
   \   000149   12....       LCALL   ?Subroutine56 & 0xFFFF
    369              tempLen = dataLen + MT_AF_REQ_MSG_LEN + MT_AF_REQ_MSG_EXT;
   \                     ??CrossCallReturnLabel_104:
   \   00014C   EE           MOV     A,R6
   \   00014D   2414         ADD     A,#0x14
   \   00014F   F8           MOV     R0,A
   \   000150   EF           MOV     A,R7
   \   000151   3400         ADDC    A,#0x0
   \   000153   F9           MOV     R1,A
    370              pBuf += 2;
   \   000154   12....       LCALL   ??Subroutine67_0 & 0xFFFF
    371            }
   \                     ??CrossCallReturnLabel_130:
   \   000157   8013         SJMP    ??MT_AfDataRequest_4
    372            else
    373            {
    374              dataLen = *pBuf++;
   \                     ??MT_AfDataRequest_3:
   \   000159   85..82       MOV     DPL,?V0 + 6
   \   00015C   AE82         MOV     R6,DPL
   \   00015E   7F00         MOV     R7,#0x0
   \   000160   88..         MOV     ?V0 + 0,R0
   \   000162   89..         MOV     ?V0 + 1,R1
    375              tempLen = dataLen + MT_AF_REQ_MSG_LEN;
   \   000164   EE           MOV     A,R6
   \   000165   240A         ADD     A,#0xa
   \   000167   F8           MOV     R0,A
   \   000168   E4           CLR     A
   \   000169   3400         ADDC    A,#0x0
   \   00016B   F9           MOV     R1,A
    376            }
    377          
    378            if ( epDesc == NULL )
   \                     ??MT_AfDataRequest_4:
   \   00016C   7404         MOV     A,#0x4
   \   00016E   12....       LCALL   ?XSTACK_DISP0_8
   \   000171   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_131:
   \   000174   EA           MOV     A,R2
   \   000175   4B           ORL     A,R3
   \   000176   700B         JNZ     ??MT_AfDataRequest_5
    379            {
    380              retValue = afStatus_INVALID_PARAMETER;
   \                     ??MT_AfDataRequest_6:
   \   000178   85..82       MOV     DPL,?XSP + 0
   \   00017B   85..83       MOV     DPH,?XSP + 1
   \   00017E   7402         MOV     A,#0x2
   \   000180   02....       LJMP    ??MT_AfDataRequest_7 & 0xFFFF
    381            }
    382            else if (tempLen > (uint16)MT_RPC_DATA_MAX)
   \                     ??MT_AfDataRequest_5:
   \   000183   C3           CLR     C
   \   000184   E8           MOV     A,R0
   \   000185   94FB         SUBB    A,#-0x5
   \   000187   E9           MOV     A,R1
   \   000188   9400         SUBB    A,#0x0
   \   00018A   5003         JNC     $+5
   \   00018C   02....       LJMP    ??MT_AfDataRequest_8 & 0xFFFF
    383            {
    384              if (pMtAfDataReq != NULL)
   \   00018F   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_193:
   \   000192   70E4         JNZ     ??MT_AfDataRequest_6
    385              {
    386                retValue = afStatus_INVALID_PARAMETER;
    387              }
    388              else if ((pMtAfDataReq = osal_mem_alloc(sizeof(mtAfDataReq_t) + dataLen)) == NULL)
   \   000194                ; Setup parameters for call to function osal_mem_alloc
   \   000194   EE           MOV     A,R6
   \   000195   2418         ADD     A,#0x18
   \   000197   FA           MOV     R2,A
   \   000198   EF           MOV     A,R7
   \   000199   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   00019C   90....       MOV     DPTR,#pMtAfDataReq
   \   00019F   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   0001A2   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_194:
   \   0001A5   85..82       MOV     DPL,?XSP + 0
   \   0001A8   85..83       MOV     DPH,?XSP + 1
   \   0001AB   7005         JNZ     ??MT_AfDataRequest_9
    389              {
    390                retValue = afStatus_MEM_FAIL;
   \   0001AD   7410         MOV     A,#0x10
   \   0001AF   02....       LJMP    ??MT_AfDataRequest_7 & 0xFFFF
    391              }
    392              else
    393              {
    394                retValue = afStatus_SUCCESS;
   \                     ??MT_AfDataRequest_9:
   \   0001B2   E4           CLR     A
   \   0001B3   12....       LCALL   ?Subroutine42 & 0xFFFF
    395          
    396                pMtAfDataReq->data = (uint8 *)(pMtAfDataReq+1);
   \                     ??CrossCallReturnLabel_75:
   \   0001B6   2418         ADD     A,#0x18
   \   0001B8   F8           MOV     R0,A
   \   0001B9   A3           INC     DPTR
   \   0001BA   E0           MOVX    A,@DPTR
   \   0001BB   3400         ADDC    A,#0x0
   \   0001BD   F9           MOV     R1,A
   \   0001BE   90....       MOV     DPTR,#pMtAfDataReq
   \   0001C1   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_138:
   \   0001C4   F583         MOV     DPH,A
   \   0001C6   8A82         MOV     DPL,R2
   \   0001C8   12....       LCALL   ?Subroutine44 & 0xFFFF
    397                (void)osal_memcpy(&(pMtAfDataReq->dstAddr), &dstAddr, sizeof(afAddrType_t));
   \                     ??CrossCallReturnLabel_82:
   \   0001CB                ; Setup parameters for call to function osal_memcpy
   \   0001CB   7407         MOV     A,#0x7
   \   0001CD   12....       LCALL   ?XSTACK_DISP0_8
   \   0001D0   A982         MOV     R1,DPL
   \   0001D2   AA83         MOV     R2,DPH
   \   0001D4   89..         MOV     ?V0 + 0,R1
   \   0001D6   8A..         MOV     ?V0 + 1,R2
   \   0001D8   75..00       MOV     ?V0 + 2,#0x0
   \   0001DB   78..         MOV     R0,#?V0 + 0
   \   0001DD   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0001E0   7C0C         MOV     R4,#0xc
   \   0001E2   7D00         MOV     R5,#0x0
   \   0001E4   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_205:
   \   0001E7   12....       LCALL   ??Subroutine75_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_174:
   \   0001EA   12....       LCALL   ?DEALLOC_XSTACK8
    398                pMtAfDataReq->epDesc = epDesc;
   \   0001ED   7404         MOV     A,#0x4
   \   0001EF   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F2   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_132:
   \   0001F5   90....       MOV     DPTR,#pMtAfDataReq
   \   0001F8   E0           MOVX    A,@DPTR
   \   0001F9   240E         ADD     A,#0xe
   \   0001FB   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_151:
   \   0001FE   12....       LCALL   ?Subroutine39 & 0xFFFF
    399                pMtAfDataReq->cId = cId;
   \                     ??CrossCallReturnLabel_65:
   \   000201   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_159:
   \   000204   E5..         MOV     A,?V0 + 4
   \   000206   F0           MOVX    @DPTR,A
   \   000207   A3           INC     DPTR
   \   000208   E5..         MOV     A,?V0 + 5
   \   00020A   12....       LCALL   ?Subroutine42 & 0xFFFF
    400                pMtAfDataReq->dataLen = dataLen;
   \                     ??CrossCallReturnLabel_76:
   \   00020D   2412         ADD     A,#0x12
   \   00020F   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_152:
   \   000212   EE           MOV     A,R6
   \   000213   F0           MOVX    @DPTR,A
   \   000214   A3           INC     DPTR
   \   000215   EF           MOV     A,R7
   \   000216   F0           MOVX    @DPTR,A
    401                pMtAfDataReq->transId = transId;
   \   000217   7402         MOV     A,#0x2
   \   000219   12....       LCALL   ?XSTACK_DISP0_8
   \   00021C   E0           MOVX    A,@DPTR
   \   00021D   C0E0         PUSH    A
   \   00021F   90....       MOV     DPTR,#pMtAfDataReq
   \   000222   E0           MOVX    A,@DPTR
   \   000223   2414         ADD     A,#0x14
   \   000225   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_153:
   \   000228   D0E0         POP     A
   \   00022A   F0           MOVX    @DPTR,A
    402                pMtAfDataReq->txOpts = txOpts;
   \   00022B   7403         MOV     A,#0x3
   \   00022D   12....       LCALL   ?XSTACK_DISP0_8
   \   000230   E0           MOVX    A,@DPTR
   \   000231   C0E0         PUSH    A
   \   000233   90....       MOV     DPTR,#pMtAfDataReq
   \   000236   E0           MOVX    A,@DPTR
   \   000237   2415         ADD     A,#0x15
   \   000239   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_154:
   \   00023C   D0E0         POP     A
   \   00023E   12....       LCALL   ?Subroutine42 & 0xFFFF
    403                pMtAfDataReq->radius = radius;
   \                     ??CrossCallReturnLabel_77:
   \   000241   2416         ADD     A,#0x16
   \   000243   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_155:
   \   000246   E5..         MOV     A,?V0 + 3
   \   000248   12....       LCALL   ?Subroutine42 & 0xFFFF
    404          
    405                // Setup to time-out the huge outgoing item if host does not MT_AF_DATA_STORE it.
    406                pMtAfDataReq->tick = MT_AF_EXEC_CNT;
   \                     ??CrossCallReturnLabel_78:
   \   00024B   2417         ADD     A,#0x17
   \   00024D   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_156:
   \   000250   12....       LCALL   ?Subroutine22 & 0xFFFF
    407                if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \                     ??CrossCallReturnLabel_118:
   \   000253   6059         JZ      ??MT_AfDataRequest_10
    408                {
    409                  (void)osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   000255                ; Setup parameters for call to function osal_set_event
   \   000255   12....       LCALL   ?Subroutine27 & 0xFFFF
    410                }
    411              }
    412            }
   \                     ??CrossCallReturnLabel_45:
   \   000258   8054         SJMP    ??MT_AfDataRequest_10
    413            else
    414            {
    415              retValue = AF_DataRequest(&dstAddr, epDesc, cId, dataLen, pBuf, &transId, txOpts, radius);
   \                     ??MT_AfDataRequest_8:
   \   00025A                ; Setup parameters for call to function AF_DataRequest
   \   00025A   E5..         MOV     A,?V0 + 3
   \   00025C   F5..         MOV     ?V0 + 2,A
   \   00025E   78..         MOV     R0,#?V0 + 2
   \   000260   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000263   7403         MOV     A,#0x3
   \   000265   12....       LCALL   ?XSTACK_DISP0_8
   \   000268   8582..       MOV     ?V0 + 2,DPL
   \   00026B   8583..       MOV     ?V0 + 3,DPH
   \   00026E   78..         MOV     R0,#?V0 + 2
   \   000270   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000273   78..         MOV     R0,#?V0 + 0
   \   000275   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000278   8E..         MOV     ?V0 + 0,R6
   \   00027A   8F..         MOV     ?V0 + 1,R7
   \   00027C   78..         MOV     R0,#?V0 + 0
   \   00027E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000281   78..         MOV     R0,#?V0 + 4
   \   000283   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000286   740C         MOV     A,#0xc
   \   000288   12....       LCALL   ?XSTACK_DISP0_8
   \   00028B   E0           MOVX    A,@DPTR
   \   00028C   F9           MOV     R1,A
   \   00028D   740D         MOV     A,#0xd
   \   00028F   12....       LCALL   ?XSTACK_DISP0_8
   \   000292   12....       LCALL   ?Subroutine16 & 0xFFFF
    416            }
   \                     ??CrossCallReturnLabel_22:
   \   000295   7410         MOV     A,#0x10
   \   000297   12....       LCALL   ?XSTACK_DISP0_8
   \   00029A   AA82         MOV     R2,DPL
   \   00029C   AB83         MOV     R3,DPH
   \   00029E   12....       LCALL   ??AF_DataRequest?relay
   \   0002A1   7409         MOV     A,#0x9
   \   0002A3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002A6   E9           MOV     A,R1
   \   0002A7   85..82       MOV     DPL,?XSP + 0
   \   0002AA   85..83       MOV     DPH,?XSP + 1
   \                     ??MT_AfDataRequest_7:
   \   0002AD   F0           MOVX    @DPTR,A
    417          
    418            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??MT_AfDataRequest_10:
   \   0002AE   7406         MOV     A,#0x6
   \   0002B0   12....       LCALL   ?XSTACK_DISP0_8
   \   0002B3   E0           MOVX    A,@DPTR
   \   0002B4   54E0         ANL     A,#0xe0
   \   0002B6   6420         XRL     A,#0x20
   \   0002B8   7013         JNZ     ??CrossCallReturnLabel_42
    419            {
    420              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_AF), cmd1, 1, &retValue);
   \   0002BA                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0002BA   85..82       MOV     DPL,?XSP + 0
   \   0002BD   85..83       MOV     DPH,?XSP + 1
   \   0002C0   AC82         MOV     R4,DPL
   \   0002C2   AD83         MOV     R5,DPH
   \   0002C4   7B01         MOV     R3,#0x1
   \   0002C6   EB           MOV     A,R3
   \   0002C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0002CA   12....       LCALL   ?Subroutine26 & 0xFFFF
    421            }
    422          }
   \                     ??CrossCallReturnLabel_42:
   \   0002CD   7413         MOV     A,#0x13
   \   0002CF   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   90....       MOV     DPTR,#pMtAfDataReq
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   7402         MOV     A,#0x2
   \   000002                REQUIRE ??Subroutine61_0
   \   000002                ; // Fall through to label ??Subroutine61_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine61_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   85..82       MOV     DPL,?V0 + 0
   \   000004   85..83       MOV     DPH,?V0 + 1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   12....       LCALL   ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine55:
   \   000000   12....       LCALL   ?Subroutine60 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   000003   8582..       MOV     ?V0 + 0,DPL
   \   000006   8583..       MOV     ?V0 + 1,DPH
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005                REQUIRE ??Subroutine62_0
   \   000005                ; // Fall through to label ??Subroutine62_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2402         ADD     A,#0x2
   \   000004                REQUIRE ??Subroutine63_0
   \   000004                ; // Fall through to label ??Subroutine63_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine63_0:
   \   000000   F5..         MOV     ?V0 + 0,A
   \   000002   E5..         MOV     A,?V0 + 1
   \   000004                REQUIRE ??Subroutine64_0
   \   000004                ; // Fall through to label ??Subroutine64_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine64_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F5..         MOV     ?V0 + 1,A
   \   000004   85..82       MOV     DPL,?V0 + 0
   \   000007   F583         MOV     DPH,A
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   740F         MOV     A,#0xf
   \   000002   F0           MOVX    @DPTR,A
   \   000003                ; Setup parameters for call to function osal_start_timerEx
   \   000003                ; Setup parameters for call to function osal_start_timerEx
   \   000003                REQUIRE ??Subroutine65_0
   \   000003                ; // Fall through to label ??Subroutine65_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   12....       LCALL   ?Subroutine60 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F5..         MOV     ?V0 + 3,A
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine60:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   85..82       MOV     DPL,?V0 + 0
   \   000004   85..83       MOV     DPH,?V0 + 1
   \   000007   A3           INC     DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   12....       LCALL   ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   7964         MOV     R1,#0x64
   \   000004   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_139:
   \   000003   F9           MOV     R1,A
   \   000004   EA           MOV     A,R2
   \   000005   F8           MOV     R0,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   A3           INC     DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F08         MOV     R7,#0x8
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   EB           MOV     A,R3
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                REQUIRE ??Subroutine67_0
   \   000001                ; // Fall through to label ??Subroutine67_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine67_0:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2402         ADD     A,#0x2
   \   000004   F5..         MOV     ?V0 + 0,A
   \   000006   E5..         MOV     A,?V0 + 1
   \   000008                REQUIRE ??Subroutine68_0
   \   000008                ; // Fall through to label ??Subroutine68_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine68_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F5..         MOV     ?V0 + 1,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FB           MOV     R3,A
   \   000003   12....       LCALL   ??osal_mem_alloc?relay
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine69_0:
   \   000000   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_141:
   \   000003   FB           MOV     R3,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   90....       MOV     DPTR,#pMtAfDataReq
   \   000003   E0           MOVX    A,@DPTR
   \   000004   2410         ADD     A,#0x10
   \   000006                REQUIRE ??Subroutine72_0
   \   000006                ; // Fall through to label ??Subroutine72_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine72_0:
   \   000000   12....       LCALL   ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_212:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine75_0:
   \   000000   12....       LCALL   ??osal_memcpy?relay
   \   000003   7403         MOV     A,#0x3
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine56:
   \   000000   2400         ADD     A,#0x0
   \   000002   FE           MOV     R6,A
   \   000003   E4           CLR     A
   \   000004   39           ADDC    A,R1
   \   000005   FF           MOV     R7,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   90....       MOV     DPTR,#pMtAfDataReq
   \   000003   E0           MOVX    A,@DPTR
   \   000004   2402         ADD     A,#0x2
   \   000006                REQUIRE ??Subroutine79_0
   \   000006                ; // Fall through to label ??Subroutine79_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine79_0:
   \   000000   FA           MOV     R2,A
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   3400         ADDC    A,#0x0
   \   000005   FB           MOV     R3,A
   \   000006   22           RET
    423          
    424          #if defined ( ZIGBEE_SOURCE_ROUTING )
    425          
    426          /***************************************************************************************************
    427           * @fn      MT_AfDataRequestSrcRtg
    428           *
    429           * @brief   Process AF Register command
    430           *
    431           * @param   pBuf - pointer to the received buffer
    432           *
    433           * @return  none
    434           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    435          void MT_AfDataRequestSrcRtg(uint8 *pBuf)
   \                     MT_AfDataRequestSrcRtg:
    436          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 18
   \   000005   74EE         MOV     A,#-0x12
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    437            uint8 cmdId, dataLen = 0;
    438            uint8 retValue = ZFailure;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   7401         MOV     A,#0x1
   \   000012   12....       LCALL   ?Subroutine35 & 0xFFFF
    439            endPointDesc_t *epDesc;
    440            byte transId;
    441            afAddrType_t dstAddr;
    442            cId_t cId;
    443            byte txOpts, radius, srcEP, relayCnt;
    444            uint16 *pRelayList;
    445            uint8 i;
    446          
    447            /* parse header */
    448            cmdId = pBuf[MT_RPC_POS_CMD1];
   \                     ??CrossCallReturnLabel_59:
   \   000015   C0E0         PUSH    A
   \   000017   7403         MOV     A,#0x3
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   D0E0         POP     A
   \   00001E   F0           MOVX    @DPTR,A
    449            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00001F   EA           MOV     A,R2
   \   000020   2403         ADD     A,#0x3
   \   000022   F5..         MOV     ?V0 + 0,A
   \   000024   EB           MOV     A,R3
   \   000025   12....       LCALL   ??Subroutine68_0 & 0xFFFF
    450          
    451            /* Destination address */
    452            /* Initialize the panID field to zero to avoid inter-pan */
    453            osal_memset( &dstAddr, 0, sizeof(afAddrType_t) );
   \                     ??CrossCallReturnLabel_127:
   \   000028                ; Setup parameters for call to function osal_memset
   \   000028   7C0C         MOV     R4,#0xc
   \   00002A   7D00         MOV     R5,#0x0
   \   00002C   7900         MOV     R1,#0x0
   \   00002E   7406         MOV     A,#0x6
   \   000030   12....       LCALL   ?XSTACK_DISP0_8
   \   000033   AA82         MOV     R2,DPL
   \   000035   AB83         MOV     R3,DPH
   \   000037   12....       LCALL   ??osal_memset?relay
    454            dstAddr.addrMode = afAddr16Bit;
   \   00003A   740E         MOV     A,#0xe
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   12....       LCALL   ?Subroutine40 & 0xFFFF
    455            dstAddr.addr.shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_110:
   \   000042   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000045   7406         MOV     A,#0x6
   \   000047   12....       LCALL   ?XSTACK_DISP0_8
   \   00004A   12....       LCALL   ?Subroutine29 & 0xFFFF
    456            pBuf += 2;
    457          
    458            /* Destination endpoint */
    459            dstAddr.endPoint = *pBuf++;
   \                     ??CrossCallReturnLabel_113:
   \   00004D   C0E0         PUSH    A
   \   00004F   740F         MOV     A,#0xf
   \   000051   12....       LCALL   ?XSTACK_DISP0_8
   \   000054   D0E0         POP     A
   \   000056   12....       LCALL   ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   000059   A3           INC     DPTR
    460          
    461            /* Source endpoint */
    462            srcEP = *pBuf++;
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   F9           MOV     R1,A
   \   00005C   A3           INC     DPTR
   \   00005D   8582..       MOV     ?V0 + 0,DPL
   \   000060   8583..       MOV     ?V0 + 1,DPH
    463            epDesc = afFindEndPointDesc( srcEP );
   \   000063                ; Setup parameters for call to function afFindEndPointDesc
   \   000063   12....       LCALL   ??afFindEndPointDesc?relay
   \   000066   7404         MOV     A,#0x4
   \   000068   12....       LCALL   ?XSTACK_DISP0_8
   \   00006B   12....       LCALL   ?Subroutine39 & 0xFFFF
    464          
    465            /* ClusterId */
    466            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_66:
   \   00006E   85..82       MOV     DPL,?V0 + 0
   \   000071   85..83       MOV     DPH,?V0 + 1
   \   000074   E0           MOVX    A,@DPTR
   \   000075   FA           MOV     R2,A
   \   000076   12....       LCALL   ?Subroutine23 & 0xFFFF
    467            pBuf +=2;
   \                     ??CrossCallReturnLabel_38:
   \   000079   12....       LCALL   ??Subroutine62_0 & 0xFFFF
    468          
    469            /* TransId */
    470            transId = *pBuf++;
   \                     ??CrossCallReturnLabel_115:
   \   00007C   C0E0         PUSH    A
   \   00007E   7401         MOV     A,#0x1
   \   000080   12....       LCALL   ?XSTACK_DISP0_8
   \   000083   D0E0         POP     A
   \   000085   12....       LCALL   ?Subroutine32 & 0xFFFF
    471          
    472            /* TxOption */
    473            txOpts = *pBuf++;
   \                     ??CrossCallReturnLabel_54:
   \   000088   C0E0         PUSH    A
   \   00008A   7402         MOV     A,#0x2
   \   00008C   12....       LCALL   ?XSTACK_DISP0_8
   \   00008F   D0E0         POP     A
   \   000091   12....       LCALL   ?Subroutine36 & 0xFFFF
    474          
    475            /* Radius */
    476            radius = *pBuf++;
    477          
    478            /* Source route relay count */
    479            relayCnt = *pBuf++;
   \                     ??CrossCallReturnLabel_61:
   \   000094   E0           MOVX    A,@DPTR
   \   000095   F5..         MOV     ?V0 + 2,A
   \   000097   A3           INC     DPTR
   \   000098   8582..       MOV     ?V0 + 0,DPL
   \   00009B   8583..       MOV     ?V0 + 1,DPH
    480          
    481            /* Convert the source route relay list */
    482            if( (pRelayList = osal_mem_alloc( relayCnt * sizeof( uint16 ))) != NULL )
   \   00009E                ; Setup parameters for call to function osal_mem_alloc
   \   00009E   C3           CLR     C
   \   00009F   33           RLC     A
   \   0000A0   FA           MOV     R2,A
   \   0000A1   E4           CLR     A
   \   0000A2   33           RLC     A
   \   0000A3   FB           MOV     R3,A
   \   0000A4   12....       LCALL   ??osal_mem_alloc?relay
   \   0000A7   8A..         MOV     ?V0 + 6,R2
   \   0000A9   8B..         MOV     ?V0 + 7,R3
   \   0000AB   EA           MOV     A,R2
   \   0000AC   45..         ORL     A,?V0 + 7
   \   0000AE   7003         JNZ     $+5
   \   0000B0   02....       LJMP    ??MT_AfDataRequestSrcRtg_0 & 0xFFFF
    483            {
    484              for( i = 0; i < relayCnt; i++ )
   \   0000B3   7C00         MOV     R4,#0x0
   \   0000B5   8023         SJMP    ??MT_AfDataRequestSrcRtg_1
    485              {
    486                pRelayList[i]  = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_AfDataRequestSrcRtg_2:
   \   0000B7   F8           MOV     R0,A
   \   0000B8   8A82         MOV     DPL,R2
   \   0000BA   8B83         MOV     DPH,R3
   \   0000BC   E0           MOVX    A,@DPTR
   \   0000BD   FB           MOV     R3,A
   \   0000BE   E8           MOV     A,R0
   \   0000BF   2400         ADD     A,#0x0
   \   0000C1   FA           MOV     R2,A
   \   0000C2   EC           MOV     A,R4
   \   0000C3   33           RLC     A
   \   0000C4   F8           MOV     R0,A
   \   0000C5   E4           CLR     A
   \   0000C6   33           RLC     A
   \   0000C7   F9           MOV     R1,A
   \   0000C8   E5..         MOV     A,?V0 + 6
   \   0000CA   28           ADD     A,R0
   \   0000CB   F582         MOV     DPL,A
   \   0000CD   E5..         MOV     A,?V0 + 7
   \   0000CF   39           ADDC    A,R1
   \   0000D0   F583         MOV     DPH,A
   \   0000D2   EA           MOV     A,R2
   \   0000D3   F0           MOVX    @DPTR,A
   \   0000D4   A3           INC     DPTR
   \   0000D5   EB           MOV     A,R3
   \   0000D6   12....       LCALL   ?Subroutine31 & 0xFFFF
    487                pBuf += 2;
    488              }
   \                     ??CrossCallReturnLabel_125:
   \   0000D9   0C           INC     R4
   \                     ??MT_AfDataRequestSrcRtg_1:
   \   0000DA   85..82       MOV     DPL,?V0 + 0
   \   0000DD   85..83       MOV     DPH,?V0 + 1
   \   0000E0   A3           INC     DPTR
   \   0000E1   AA82         MOV     R2,DPL
   \   0000E3   AB83         MOV     R3,DPH
   \   0000E5   EC           MOV     A,R4
   \   0000E6   C3           CLR     C
   \   0000E7   95..         SUBB    A,?V0 + 2
   \   0000E9   85..82       MOV     DPL,?V0 + 0
   \   0000EC   85..83       MOV     DPH,?V0 + 1
   \   0000EF   E0           MOVX    A,@DPTR
   \   0000F0   40C5         JC      ??MT_AfDataRequestSrcRtg_2
    489          
    490              /* Data payload Length */
    491              dataLen = *pBuf++;
   \   0000F2   F9           MOV     R1,A
   \   0000F3   8A..         MOV     ?V0 + 0,R2
   \   0000F5   8B..         MOV     ?V0 + 1,R3
    492          
    493              if ( epDesc == NULL )
   \   0000F7   7404         MOV     A,#0x4
   \   0000F9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000FC   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_133:
   \   0000FF   EA           MOV     A,R2
   \   000100   4B           ORL     A,R3
   \   000101   700A         JNZ     ??MT_AfDataRequestSrcRtg_3
    494              {
    495                retValue = afStatus_INVALID_PARAMETER;
   \   000103   85..82       MOV     DPL,?XSP + 0
   \   000106   85..83       MOV     DPH,?XSP + 1
   \   000109   7402         MOV     A,#0x2
   \   00010B   8062         SJMP    ??MT_AfDataRequestSrcRtg_4
    496              }
    497              else
    498              {
    499                retValue = AF_DataRequestSrcRtg( &dstAddr, epDesc, cId, dataLen, pBuf,
    500                                               &transId, txOpts, radius, relayCnt, pRelayList );
   \                     ??MT_AfDataRequestSrcRtg_3:
   \   00010D                ; Setup parameters for call to function AF_DataRequestSrcRtg
   \   00010D   78..         MOV     R0,#?V0 + 6
   \   00010F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000112   78..         MOV     R0,#?V0 + 2
   \   000114   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000117   E5..         MOV     A,?V0 + 3
   \   000119   F5..         MOV     ?V0 + 2,A
   \   00011B   78..         MOV     R0,#?V0 + 2
   \   00011D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000120   7405         MOV     A,#0x5
   \   000122   12....       LCALL   ?XSTACK_DISP0_8
   \   000125   8582..       MOV     ?V0 + 2,DPL
   \   000128   8583..       MOV     ?V0 + 3,DPH
   \   00012B   78..         MOV     R0,#?V0 + 2
   \   00012D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000130   78..         MOV     R0,#?V0 + 0
   \   000132   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000135   89..         MOV     ?V0 + 0,R1
   \   000137   75..00       MOV     ?V0 + 1,#0x0
   \   00013A   78..         MOV     R0,#?V0 + 0
   \   00013C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013F   8E..         MOV     ?V0 + 0,R6
   \   000141   8F..         MOV     ?V0 + 1,R7
   \   000143   78..         MOV     R0,#?V0 + 0
   \   000145   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000148   740E         MOV     A,#0xe
   \   00014A   12....       LCALL   ?XSTACK_DISP0_8
   \   00014D   E0           MOVX    A,@DPTR
   \   00014E   F9           MOV     R1,A
   \   00014F   7410         MOV     A,#0x10
   \   000151   12....       LCALL   ?XSTACK_DISP0_8
   \   000154   12....       LCALL   ?Subroutine16 & 0xFFFF
    501              }
   \                     ??CrossCallReturnLabel_23:
   \   000157   7412         MOV     A,#0x12
   \   000159   12....       LCALL   ?XSTACK_DISP0_8
   \   00015C   AA82         MOV     R2,DPL
   \   00015E   AB83         MOV     R3,DPH
   \   000160   12....       LCALL   ??AF_DataRequestSrcRtg?relay
   \   000163   740C         MOV     A,#0xc
   \   000165   12....       LCALL   ?DEALLOC_XSTACK8
   \   000168   E9           MOV     A,R1
   \   000169   85..82       MOV     DPL,?XSP + 0
   \   00016C   85..83       MOV     DPH,?XSP + 1
   \                     ??MT_AfDataRequestSrcRtg_4:
   \   00016F   F0           MOVX    @DPTR,A
    502          
    503              /* Free the memory allocated */
    504              osal_mem_free( pRelayList );
   \   000170                ; Setup parameters for call to function osal_mem_free
   \   000170   AA..         MOV     R2,?V0 + 6
   \   000172   AB..         MOV     R3,?V0 + 7
   \   000174   12....       LCALL   ??osal_mem_free?relay
   \   000177   8009         SJMP    ??MT_AfDataRequestSrcRtg_5
    505            }
    506            else
    507            {
    508              retValue = afStatus_MEM_FAIL;
   \                     ??MT_AfDataRequestSrcRtg_0:
   \   000179   85..82       MOV     DPL,?XSP + 0
   \   00017C   85..83       MOV     DPH,?XSP + 1
   \   00017F   7410         MOV     A,#0x10
   \   000181   F0           MOVX    @DPTR,A
    509            }
    510          
    511          
    512            /* Build and send back the response */
    513            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
   \                     ??MT_AfDataRequestSrcRtg_5:
   \   000182                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000182   85..82       MOV     DPL,?XSP + 0
   \   000185   85..83       MOV     DPH,?XSP + 1
   \   000188   AC82         MOV     R4,DPL
   \   00018A   AD83         MOV     R5,DPH
   \   00018C   7B01         MOV     R3,#0x1
   \   00018E   7403         MOV     A,#0x3
   \   000190   12....       LCALL   ?XSTACK_DISP0_8
   \   000193   12....       LCALL   ?Subroutine26 & 0xFFFF
    514          }
   \                     ??CrossCallReturnLabel_43:
   \   000196   7412         MOV     A,#0x12
   \   000198   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F9           MOV     R1,A
   \   000003   EA           MOV     A,R2
   \   000004   12....       LCALL   ?Subroutine56 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   000007   22           RET
    515          #endif
    516          
    517          #if defined INTER_PAN
    518          /***************************************************************************************************
    519           * @fn      MT_AfInterPanCtl
    520           *
    521           * @brief   Process the AF Inter Pan control command.
    522           *
    523           * @param   pBuf - pointer to the received buffer
    524           *
    525           * @return  none
    526           ***************************************************************************************************/
    527          static void MT_AfInterPanCtl(uint8 *pBuf)
    528          {
    529            uint8 cmd, rtrn;
    530            uint16 panId;
    531            endPointDesc_t *pEP;
    532          
    533            cmd = pBuf[MT_RPC_POS_CMD1];
    534            pBuf += MT_RPC_FRAME_HDR_SZ;
    535          
    536            switch (*pBuf++)  // Inter-pan request parameter.
    537            {
    538            case InterPanClr:
    539              rtrn = StubAPS_SetIntraPanChannel();           // Switch channel back to the NIB channel.
    540              break;
    541          
    542            case InterPanSet:
    543              rtrn = StubAPS_SetInterPanChannel(*pBuf);      // Set channel for inter-pan communication.
    544              break;
    545          
    546            case InterPanReg:
    547              if ((pEP = afFindEndPointDesc(*pBuf)))
    548              {
    549                StubAPS_RegisterApp(pEP);
    550                rtrn = SUCCESS;
    551              }
    552              else
    553              {
    554                rtrn = FAILURE;
    555              }
    556              break;
    557          
    558            case InterPanChk:
    559              panId = BUILD_UINT16(pBuf[0], pBuf[1]);
    560              rtrn = (StubAPS_InterPan(panId, pBuf[2])) ? ZSuccess : ZFailure;
    561              break;
    562          
    563            default:
    564              rtrn = afStatus_INVALID_PARAMETER;
    565              break;
    566            }
    567          
    568            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmd, 1, &rtrn);
    569          }
    570          #endif
    571          
    572          /***************************************************************************************************
    573           * @fn      MT_AfDataConfirm
    574           *
    575           * @brief   Process
    576           *
    577           * @param   pBuf - pointer to the received buffer
    578           *
    579           * @return  none
    580           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    581          void MT_AfDataConfirm(afDataConfirm_t *pMsg)
   \                     MT_AfDataConfirm:
    582          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 3
   \   000004   74FD         MOV     A,#-0x3
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    583            uint8 retArray[3];
    584          
    585            retArray[0] = pMsg->hdr.status;
   \   000009   8A82         MOV     DPL,R2
   \   00000B   8B83         MOV     DPH,R3
   \   00000D   A3           INC     DPTR
   \   00000E   12....       LCALL   ?Subroutine28 & 0xFFFF
    586            retArray[1] = pMsg->endpoint;
   \                     ??CrossCallReturnLabel_47:
   \   000011   8A82         MOV     DPL,R2
   \   000013   8B83         MOV     DPH,R3
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   C0E0         PUSH    A
   \   00001A   7401         MOV     A,#0x1
   \   00001C   12....       LCALL   ?XSTACK_DISP0_8
   \   00001F   D0E0         POP     A
   \   000021   12....       LCALL   ?Subroutine41 & 0xFFFF
    587            retArray[2] = pMsg->transID;
   \                     ??CrossCallReturnLabel_73:
   \   000024   A3           INC     DPTR
   \   000025   A3           INC     DPTR
   \   000026   E0           MOVX    A,@DPTR
   \   000027   C0E0         PUSH    A
   \   000029   7402         MOV     A,#0x2
   \   00002B   12....       LCALL   ?XSTACK_DISP0_8
   \   00002E   D0E0         POP     A
   \   000030   12....       LCALL   ?Subroutine38 & 0xFFFF
    588          
    589            /* Build and send back the response */
    590            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_AF), MT_AF_DATA_CONFIRM, 3, retArray);
   \                     ??CrossCallReturnLabel_62:
   \   000033   7B03         MOV     R3,#0x3
   \   000035   7A80         MOV     R2,#-0x80
   \   000037   7944         MOV     R1,#0x44
   \   000039   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    591          }
   \   00003C   7403         MOV     A,#0x3
   \   00003E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000041   D083         POP     DPH
   \   000043   D082         POP     DPL
   \   000045   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000001                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   AC82         MOV     R4,DPL
   \   000009   AD83         MOV     R5,DPH
   \   00000B   22           RET
    592          
    593          /***************************************************************************************************
    594           * @fn          MT_AfIncomingMsg
    595           *
    596           * @brief       Process the callback subscription for AF Incoming data.
    597           *
    598           * @param       pkt - Incoming AF data.
    599           *
    600           * @return      none
    601           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    602          void MT_AfIncomingMsg(afIncomingMSGPacket_t *pMsg)
   \                     MT_AfIncomingMsg:
    603          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   12....       LCALL   ?Subroutine33 & 0xFFFF
    604            #define MT_AF_INC_MSG_LEN  17
    605            #define MT_AF_INC_MSG_EXT  10
    606          
    607            uint16 dataLen = pMsg->cmd.DataLength;  // Length of the data section in the response packet.
   \                     ??CrossCallReturnLabel_175:
   \   000013   2420         ADD     A,#0x20
   \   000015   12....       LCALL   ??Subroutine80_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_207:
   \   000018   F5..         MOV     ?V0 + 6,A
   \   00001A   A3           INC     DPTR
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   F5..         MOV     ?V0 + 7,A
    608            uint16 respLen = MT_AF_INC_MSG_LEN + dataLen;
   \   00001E   E5..         MOV     A,?V0 + 6
   \   000020   2411         ADD     A,#0x11
   \   000022   F5..         MOV     ?V0 + 4,A
   \   000024   E5..         MOV     A,?V0 + 7
   \   000026   3400         ADDC    A,#0x0
   \   000028   F5..         MOV     ?V0 + 5,A
    609            uint8 cmd = MT_AF_INCOMING_MSG;
   \   00002A   7404         MOV     A,#0x4
   \   00002C   12....       LCALL   ?XSTACK_DISP0_8
   \   00002F   7481         MOV     A,#-0x7f
   \   000031   F0           MOVX    @DPTR,A
    610            uint8 *pRsp, *pTmp;
    611            mtAfInMsgList_t *pItem = NULL;
   \   000032   7402         MOV     A,#0x2
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   E4           CLR     A
   \   000038   F0           MOVX    @DPTR,A
   \   000039   A3           INC     DPTR
   \   00003A   12....       LCALL   ??Subroutine76_0 & 0xFFFF
    612          
    613          #if defined INTER_PAN
    614            if (StubAPS_InterPan(pMsg->srcAddr.panId, pMsg->srcAddr.endPoint))
    615            {
    616              cmd = MT_AF_INCOMING_MSG_EXT;
    617            }
    618            else
    619          #endif
    620            if ((pMsg->srcAddr.addrMode == afAddr64Bit) ||
    621                (respLen > (uint16)(MT_RPC_DATA_MAX - MT_AF_INC_MSG_EXT)))
   \                     ??CrossCallReturnLabel_176:
   \   00003D   240E         ADD     A,#0xe
   \   00003F   F5..         MOV     ?V0 + 0,A
   \   000041   A3           INC     DPTR
   \   000042   E0           MOVX    A,@DPTR
   \   000043   12....       LCALL   ??Subroutine64_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   000046   6403         XRL     A,#0x3
   \   000048   600B         JZ      ??MT_AfIncomingMsg_0
   \   00004A   C3           CLR     C
   \   00004B   E5..         MOV     A,?V0 + 4
   \   00004D   94F1         SUBB    A,#-0xf
   \   00004F   E5..         MOV     A,?V0 + 5
   \   000051   9400         SUBB    A,#0x0
   \   000053   4014         JC      ??MT_AfIncomingMsg_1
    622            {
    623              cmd = MT_AF_INCOMING_MSG_EXT;
   \                     ??MT_AfIncomingMsg_0:
   \   000055   7404         MOV     A,#0x4
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   7482         MOV     A,#-0x7e
   \   00005C   F0           MOVX    @DPTR,A
    624            }
    625          
    626            if (cmd == MT_AF_INCOMING_MSG_EXT)
    627            {
    628              respLen += MT_AF_INC_MSG_EXT;
   \   00005D   E5..         MOV     A,?V0 + 4
   \   00005F   240A         ADD     A,#0xa
   \   000061   F5..         MOV     ?V0 + 4,A
   \   000063   E5..         MOV     A,?V0 + 5
   \   000065   3400         ADDC    A,#0x0
   \   000067   F5..         MOV     ?V0 + 5,A
    629            }
    630          
    631            if (respLen > (uint16)MT_RPC_DATA_MAX)
   \                     ??MT_AfIncomingMsg_1:
   \   000069   C3           CLR     C
   \   00006A   E5..         MOV     A,?V0 + 4
   \   00006C   94FB         SUBB    A,#-0x5
   \   00006E   E5..         MOV     A,?V0 + 5
   \   000070   9400         SUBB    A,#0x0
   \   000072   4042         JC      ??MT_AfIncomingMsg_2
    632            {
    633              if ((pItem = (mtAfInMsgList_t *)osal_mem_alloc(sizeof(mtAfInMsgList_t) + dataLen)) == NULL)
   \   000074                ; Setup parameters for call to function osal_mem_alloc
   \   000074   E5..         MOV     A,?V0 + 6
   \   000076   2409         ADD     A,#0x9
   \   000078   FA           MOV     R2,A
   \   000079   E5..         MOV     A,?V0 + 7
   \   00007B   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   00007E   7402         MOV     A,#0x2
   \   000080   12....       LCALL   ?XSTACK_DISP0_8
   \   000083   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   000086   7402         MOV     A,#0x2
   \   000088   12....       LCALL   ?XSTACK_DISP0_8
   \   00008B   12....       LCALL   ??Subroutine78_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_186:
   \   00008E   7003         JNZ     $+5
   \   000090   02....       LJMP    ??CrossCallReturnLabel_36 & 0xFFFF
    634              {
    635                return;  // If cannot hold a huge message, cannot give indication at all.
    636              }
    637          
    638              pItem->data = (uint8 *)(pItem+1);
   \   000093   7402         MOV     A,#0x2
   \   000095   12....       LCALL   ?XSTACK_DISP0_8
   \   000098   E0           MOVX    A,@DPTR
   \   000099   2409         ADD     A,#0x9
   \   00009B   12....       LCALL   ??Subroutine79_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_200:
   \   00009E   7402         MOV     A,#0x2
   \   0000A0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A3   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   0000A6   12....       LCALL   ?Subroutine39 & 0xFFFF
    639              respLen -= dataLen;  // Zero data bytes are sent with an over-sized incoming indication.
   \                     ??CrossCallReturnLabel_68:
   \   0000A9   C3           CLR     C
   \   0000AA   E5..         MOV     A,?V0 + 4
   \   0000AC   95..         SUBB    A,?V0 + 6
   \   0000AE   F5..         MOV     ?V0 + 4,A
   \   0000B0   E5..         MOV     A,?V0 + 5
   \   0000B2   95..         SUBB    A,?V0 + 7
   \   0000B4   F5..         MOV     ?V0 + 5,A
    640            }
    641          
    642            // Attempt to allocate memory for the response packet.
    643            if ((pRsp = osal_mem_alloc(respLen)) == NULL)
   \                     ??MT_AfIncomingMsg_2:
   \   0000B6                ; Setup parameters for call to function osal_mem_alloc
   \   0000B6   AA..         MOV     R2,?V0 + 4
   \   0000B8   AB..         MOV     R3,?V0 + 5
   \   0000BA   12....       LCALL   ??osal_mem_alloc?relay
   \   0000BD   7407         MOV     A,#0x7
   \   0000BF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C2   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   0000C5   7407         MOV     A,#0x7
   \   0000C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CA   12....       LCALL   ??Subroutine78_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_187:
   \   0000CD   7012         JNZ     ??MT_AfIncomingMsg_3
    644            {
    645              if (pItem != NULL)
   \   0000CF   7402         MOV     A,#0x2
   \   0000D1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D4   12....       LCALL   ??Subroutine78_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_188:
   \   0000D7   7003         JNZ     $+5
   \   0000D9   02....       LJMP    ??CrossCallReturnLabel_36 & 0xFFFF
    646              {
    647                (void)osal_mem_free(pItem);
   \   0000DC                ; Setup parameters for call to function osal_mem_free
   \   0000DC   7402         MOV     A,#0x2
   \   0000DE   02....       LJMP    ??MT_AfIncomingMsg_4 & 0xFFFF
    648              }
    649              return;
    650            }
    651            pTmp = pRsp;
   \                     ??MT_AfIncomingMsg_3:
   \   0000E1   7407         MOV     A,#0x7
   \   0000E3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E6   E0           MOVX    A,@DPTR
   \   0000E7   FE           MOV     R6,A
   \   0000E8   A3           INC     DPTR
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   FF           MOV     R7,A
    652          
    653            /* Group ID */
    654            *pTmp++ = LO_UINT16(pMsg->groupId);
   \   0000EB   85..82       MOV     DPL,?XSP + 0
   \   0000EE   85..83       MOV     DPH,?XSP + 1
   \   0000F1   E0           MOVX    A,@DPTR
   \   0000F2   2402         ADD     A,#0x2
   \   0000F4   12....       LCALL   ?Subroutine7 & 0xFFFF
    655            *pTmp++ = HI_UINT16(pMsg->groupId);
   \                     ??CrossCallReturnLabel_10:
   \   0000F7   12....       LCALL   ?Subroutine5 & 0xFFFF
    656          
    657            /* Cluster ID */
    658            *pTmp++ = LO_UINT16(pMsg->clusterId);
   \                     ??CrossCallReturnLabel_163:
   \   0000FA   85..82       MOV     DPL,?XSP + 0
   \   0000FD   85..83       MOV     DPH,?XSP + 1
   \   000100   E0           MOVX    A,@DPTR
   \   000101   2404         ADD     A,#0x4
   \   000103   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_157:
   \   000106   12....       LCALL   ??Subroutine74_0 & 0xFFFF
    659            *pTmp++ = HI_UINT16(pMsg->clusterId);
   \                     ??CrossCallReturnLabel_161:
   \   000109   12....       LCALL   ?Subroutine5 & 0xFFFF
    660          
    661            if (cmd == MT_AF_INCOMING_MSG_EXT)
   \                     ??CrossCallReturnLabel_164:
   \   00010C   A3           INC     DPTR
   \   00010D   A983         MOV     R1,DPH
   \   00010F   85..82       MOV     DPL,?XSP + 0
   \   000112   85..83       MOV     DPH,?XSP + 1
   \   000115   E0           MOVX    A,@DPTR
   \   000116   240F         ADD     A,#0xf
   \   000118   12....       LCALL   ??Subroutine79_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_201:
   \   00011B   7405         MOV     A,#0x5
   \   00011D   12....       LCALL   ?XSTACK_DISP0_8
   \   000120   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_179:
   \   000123   2406         ADD     A,#0x6
   \   000125   12....       LCALL   ??Subroutine79_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_202:
   \   000128   7404         MOV     A,#0x4
   \   00012A   12....       LCALL   ?XSTACK_DISP0_8
   \   00012D   E0           MOVX    A,@DPTR
   \   00012E   6482         XRL     A,#0x82
   \   000130   7057         JNZ     ??MT_AfIncomingMsg_5
    662            {
    663              *pTmp++ = pMsg->srcAddr.addrMode;
   \   000132   85..82       MOV     DPL,?V0 + 0
   \   000135   85..83       MOV     DPH,?V0 + 1
   \   000138   12....       LCALL   ??Subroutine70_0 & 0xFFFF
    664          
    665              if (pMsg->srcAddr.addrMode == afAddr64Bit)
   \                     ??CrossCallReturnLabel_142:
   \   00013B   85..82       MOV     DPL,?V0 + 0
   \   00013E   85..83       MOV     DPH,?V0 + 1
   \   000141   E0           MOVX    A,@DPTR
   \   000142   6403         XRL     A,#0x3
   \   000144   701B         JNZ     ??MT_AfIncomingMsg_6
    666              {
    667                (void)osal_memcpy(pTmp, pMsg->srcAddr.addr.extAddr, Z_EXTADDR_LEN);
   \   000146                ; Setup parameters for call to function osal_memcpy
   \   000146   8A..         MOV     ?V0 + 0,R2
   \   000148   8B..         MOV     ?V0 + 1,R3
   \   00014A   75..00       MOV     ?V0 + 2,#0x0
   \   00014D   78..         MOV     R0,#?V0 + 0
   \   00014F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000152   7C08         MOV     R4,#0x8
   \   000154   7D00         MOV     R5,#0x0
   \   000156   EE           MOV     A,R6
   \   000157   FA           MOV     R2,A
   \   000158   EF           MOV     A,R7
   \   000159   12....       LCALL   ?Subroutine45 & 0xFFFF
    668              }
   \                     ??CrossCallReturnLabel_169:
   \   00015C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00015F   800F         SJMP    ??MT_AfIncomingMsg_7
    669              else
    670              {
    671                pTmp[0] = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??MT_AfIncomingMsg_6:
   \   000161   8A82         MOV     DPL,R2
   \   000163   8B83         MOV     DPH,R3
   \   000165   12....       LCALL   ?Subroutine53 & 0xFFFF
    672                pTmp[1] = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
    673              }
   \                     ??CrossCallReturnLabel_165:
   \   000168   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   00016B   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_166:
   \   00016E   A3           INC     DPTR
   \   00016F   F0           MOVX    @DPTR,A
    674              pTmp += Z_EXTADDR_LEN;
   \                     ??MT_AfIncomingMsg_7:
   \   000170   EE           MOV     A,R6
   \   000171   2408         ADD     A,#0x8
   \   000173   FE           MOV     R6,A
   \   000174   EF           MOV     A,R7
   \   000175   3400         ADDC    A,#0x0
   \   000177   FF           MOV     R7,A
    675          
    676              *pTmp++ = pMsg->srcAddr.endPoint;
   \   000178   7405         MOV     A,#0x5
   \   00017A   12....       LCALL   ?XSTACK_DISP0_8
   \   00017D   12....       LCALL   ?Subroutine10 & 0xFFFF
    677          #if defined INTER_PAN
    678              *pTmp++ = LO_UINT16(pMsg->srcAddr.panId);
    679              *pTmp++ = HI_UINT16(pMsg->srcAddr.panId);
    680          #else
    681              *pTmp++ = 0;
   \                     ??CrossCallReturnLabel_12:
   \   000180   E4           CLR     A
   \   000181   F0           MOVX    @DPTR,A
   \   000182   A3           INC     DPTR
    682              *pTmp++ = 0;
   \   000183   F0           MOVX    @DPTR,A
   \   000184   A3           INC     DPTR
   \   000185   0E           INC     R6
   \   000186   0E           INC     R6
   \   000187   8012         SJMP    ??CrossCallReturnLabel_13
    683          #endif
    684            }
    685            else
    686            {
    687              /* Source Address */
    688              *pTmp++ = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??MT_AfIncomingMsg_5:
   \   000189   12....       LCALL   ?Subroutine12 & 0xFFFF
    689              *pTmp++ = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??CrossCallReturnLabel_143:
   \   00018C   8A82         MOV     DPL,R2
   \   00018E   8B83         MOV     DPH,R3
   \   000190   12....       LCALL   ??Subroutine73_0 & 0xFFFF
    690          
    691              /* Source EP */
    692              *pTmp++ = pMsg->srcAddr.endPoint;
   \                     ??CrossCallReturnLabel_162:
   \   000193   7405         MOV     A,#0x5
   \   000195   12....       LCALL   ?XSTACK_DISP0_8
   \   000198   12....       LCALL   ?Subroutine10 & 0xFFFF
    693            }
   \                     ??CrossCallReturnLabel_13:
   \   00019B   0E           INC     R6
   \   00019C   AF83         MOV     R7,DPH
    694          
    695            /* Destination EP */
    696            *pTmp++ = pMsg->endPoint;
   \   00019E   85..82       MOV     DPL,?XSP + 0
   \   0001A1   85..83       MOV     DPH,?XSP + 1
   \   0001A4   E0           MOVX    A,@DPTR
   \   0001A5   2414         ADD     A,#0x14
   \   0001A7   12....       LCALL   ?Subroutine7 & 0xFFFF
    697          
    698            /* WasBroadCast */
    699            *pTmp++ = pMsg->wasBroadcast;
   \                     ??CrossCallReturnLabel_11:
   \   0001AA   85..82       MOV     DPL,?XSP + 0
   \   0001AD   85..83       MOV     DPH,?XSP + 1
   \   0001B0   E0           MOVX    A,@DPTR
   \   0001B1   2415         ADD     A,#0x15
   \   0001B3   12....       LCALL   ?Subroutine2 & 0xFFFF
    700          
    701            /* LinkQuality */
    702            *pTmp++ = pMsg->LinkQuality;
   \                     ??CrossCallReturnLabel_0:
   \   0001B6   2416         ADD     A,#0x16
   \   0001B8   12....       LCALL   ?Subroutine2 & 0xFFFF
    703          
    704            /* SecurityUse */
    705            *pTmp++ = pMsg->SecurityUse;
   \                     ??CrossCallReturnLabel_1:
   \   0001BB   2419         ADD     A,#0x19
   \   0001BD   12....       LCALL   ?Subroutine2 & 0xFFFF
    706          
    707            /* Timestamp */
    708            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 0);
   \                     ??CrossCallReturnLabel_2:
   \   0001C0   241A         ADD     A,#0x1a
   \   0001C2   F8           MOV     R0,A
   \   0001C3   A3           INC     DPTR
   \   0001C4   E0           MOVX    A,@DPTR
   \   0001C5   3400         ADDC    A,#0x0
   \   0001C7   F9           MOV     R1,A
   \   0001C8   7405         MOV     A,#0x5
   \   0001CA   12....       LCALL   ?XSTACK_DISP0_8
   \   0001CD   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   0001D0   7405         MOV     A,#0x5
   \   0001D2   12....       LCALL   ?XSTACK_DISP0_8
   \   0001D5   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   0001D8   12....       LCALL   ?L_MOV_X
   \   0001DB   12....       LCALL   ?Subroutine37 & 0xFFFF
    709            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 1);
   \                     ??CrossCallReturnLabel_121:
   \   0001DE   12....       LCALL   ?XSTACK_DISP0_8
   \   0001E1   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0001E4   12....       LCALL   ?L_MOV_X
   \   0001E7   E5..         MOV     A,?V0 + 1
   \   0001E9   8E82         MOV     DPL,R6
   \   0001EB   8F83         MOV     DPH,R7
   \   0001ED   12....       LCALL   ??Subroutine66_0 & 0xFFFF
    710            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 2);
   \                     ??CrossCallReturnLabel_123:
   \   0001F0   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F3   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   0001F6   12....       LCALL   ?L_MOV_X
   \   0001F9   7410         MOV     A,#0x10
   \   0001FB   78..         MOV     R0,#?V0 + 0
   \   0001FD   12....       LCALL   ?UL_SHR
   \   000200   12....       LCALL   ?Subroutine37 & 0xFFFF
    711            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 3);
   \                     ??CrossCallReturnLabel_122:
   \   000203   12....       LCALL   ?XSTACK_DISP0_8
   \   000206   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000209   12....       LCALL   ?L_MOV_X
   \   00020C   7418         MOV     A,#0x18
   \   00020E   78..         MOV     R0,#?V0 + 0
   \   000210   12....       LCALL   ?UL_SHR
   \   000213   8E82         MOV     DPL,R6
   \   000215   8F83         MOV     DPH,R7
   \   000217   E5..         MOV     A,?V0 + 0
   \   000219   F0           MOVX    @DPTR,A
   \   00021A   A3           INC     DPTR
   \   00021B   0E           INC     R6
   \   00021C   AF83         MOV     R7,DPH
    712          
    713          
    714            /* Data Length */
    715            if (cmd == MT_AF_INCOMING_MSG_EXT)
   \   00021E   A3           INC     DPTR
   \   00021F   A983         MOV     R1,DPH
   \   000221   7404         MOV     A,#0x4
   \   000223   12....       LCALL   ?XSTACK_DISP0_8
   \   000226   E0           MOVX    A,@DPTR
   \   000227   6482         XRL     A,#0x82
   \   000229   7018         JNZ     ??MT_AfIncomingMsg_8
    716            {
    717              /* Z-Tool apparently takes the last Byte before the data buffer as the dynamic length and
    718               * ignores the bigger UInt16 length of an EXT incoming message. But no data bytes will be sent
    719               * with a huge message, so it's necessary to work-around and fake-out Z-Tool with a zero here.
    720               */
    721              *pTmp++ = 0;  // TODO - workaround Z-Tool shortcoming; should be: = pMsg->cmd.TransSeqNumber;
   \   00022B   8E82         MOV     DPL,R6
   \   00022D   8F83         MOV     DPH,R7
   \   00022F   E4           CLR     A
   \   000230   F0           MOVX    @DPTR,A
   \   000231   0E           INC     R6
   \   000232   E9           MOV     A,R1
   \   000233   FF           MOV     R7,A
    722              *pTmp++ = LO_UINT16(dataLen);
   \   000234   8E82         MOV     DPL,R6
   \   000236   8F83         MOV     DPH,R7
   \   000238   E5..         MOV     A,?V0 + 6
   \   00023A   F0           MOVX    @DPTR,A
   \   00023B   A3           INC     DPTR
    723              *pTmp++ = HI_UINT16(dataLen);
   \   00023C   E5..         MOV     A,?V0 + 7
   \   00023E   F0           MOVX    @DPTR,A
   \   00023F   A3           INC     DPTR
   \   000240   0E           INC     R6
   \   000241   8017         SJMP    ??MT_AfIncomingMsg_9
    724            }
    725            else
    726            {
    727              *pTmp++ = pMsg->cmd.TransSeqNumber;
   \                     ??MT_AfIncomingMsg_8:
   \   000243   85..82       MOV     DPL,?XSP + 0
   \   000246   85..83       MOV     DPH,?XSP + 1
   \   000249   E0           MOVX    A,@DPTR
   \   00024A   241F         ADD     A,#0x1f
   \   00024C   12....       LCALL   ??Subroutine79_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_203:
   \   00024F   12....       LCALL   ?Subroutine12 & 0xFFFF
    728              *pTmp++ = dataLen;
   \                     ??CrossCallReturnLabel_144:
   \   000252   8E82         MOV     DPL,R6
   \   000254   8F83         MOV     DPH,R7
   \   000256   E5..         MOV     A,?V0 + 6
   \   000258   F0           MOVX    @DPTR,A
   \   000259   A3           INC     DPTR
   \                     ??MT_AfIncomingMsg_9:
   \   00025A   0E           INC     R6
   \   00025B   AF83         MOV     R7,DPH
    729            }
    730          
    731            /* Data */
    732            if (pItem != NULL)
   \   00025D   85..82       MOV     DPL,?XSP + 0
   \   000260   85..83       MOV     DPH,?XSP + 1
   \   000263   E0           MOVX    A,@DPTR
   \   000264   2422         ADD     A,#0x22
   \   000266   F5..         MOV     ?V0 + 0,A
   \   000268   A3           INC     DPTR
   \   000269   E0           MOVX    A,@DPTR
   \   00026A   12....       LCALL   ??Subroutine68_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_128:
   \   00026D   7402         MOV     A,#0x2
   \   00026F   12....       LCALL   ?XSTACK_DISP0_8
   \   000272   12....       LCALL   ??Subroutine78_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_189:
   \   000275   605D         JZ      ??MT_AfIncomingMsg_10
    733            {
    734              // Enqueue the new huge incoming item.
    735              pItem->next = pMtAfInMsgList;
   \   000277   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_134:
   \   00027A   7402         MOV     A,#0x2
   \   00027C   12....       LCALL   ?XSTACK_DISP0_8
   \   00027F   12....       LCALL   ??Subroutine77_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_180:
   \   000282   12....       LCALL   ?Subroutine39 & 0xFFFF
    736              pMtAfInMsgList = pItem;
   \                     ??CrossCallReturnLabel_70:
   \   000285   7402         MOV     A,#0x2
   \   000287   12....       LCALL   ?XSTACK_DISP0_8
   \   00028A   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_197:
   \   00028D   90....       MOV     DPTR,#pMtAfInMsgList
   \   000290   12....       LCALL   ?Subroutine44 & 0xFFFF
    737          
    738              // Setup to time-out the huge incoming item if host does not MT_AF_DATA_RETRIEVE it.
    739              pItem->tick = MT_AF_EXEC_CNT;
   \                     ??CrossCallReturnLabel_84:
   \   000293   7402         MOV     A,#0x2
   \   000295   12....       LCALL   ?XSTACK_DISP0_8
   \   000298   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_146:
   \   00029B   A3           INC     DPTR
   \   00029C   A3           INC     DPTR
   \   00029D   A3           INC     DPTR
   \   00029E   A3           INC     DPTR
   \   00029F   12....       LCALL   ?Subroutine22 & 0xFFFF
    740              if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \                     ??CrossCallReturnLabel_119:
   \   0002A2   6003         JZ      ??CrossCallReturnLabel_46
    741              {
    742                (void)osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   0002A4                ; Setup parameters for call to function osal_set_event
   \   0002A4   12....       LCALL   ?Subroutine27 & 0xFFFF
    743              }
    744          
    745              pItem->timestamp = pMsg->timestamp;
   \                     ??CrossCallReturnLabel_46:
   \   0002A7   7405         MOV     A,#0x5
   \   0002A9   12....       LCALL   ?XSTACK_DISP0_8
   \   0002AC   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   0002AF   12....       LCALL   ?XLOAD_R2345
   \   0002B2   7402         MOV     A,#0x2
   \   0002B4   12....       LCALL   ?XSTACK_DISP0_8
   \   0002B7   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_147:
   \   0002BA   12....       LCALL   ?XSTORE_R2345
    746              (void)osal_memcpy(pItem->data, pMsg->cmd.Data, dataLen);
   \   0002BD                ; Setup parameters for call to function osal_memcpy
   \   0002BD   12....       LCALL   ?Subroutine24 & 0xFFFF
    747            }
   \                     ??CrossCallReturnLabel_40:
   \   0002C0   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0002C3   AC..         MOV     R4,?V0 + 6
   \   0002C5   AD..         MOV     R5,?V0 + 7
   \   0002C7   7405         MOV     A,#0x5
   \   0002C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0002CC   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0002CF   FA           MOV     R2,A
   \   0002D0   A3           INC     DPTR
   \   0002D1   E0           MOVX    A,@DPTR
   \   0002D2   800D         SJMP    ??MT_AfIncomingMsg_11
    748            else
    749            {
    750              (void)osal_memcpy(pTmp, pMsg->cmd.Data, dataLen);
   \                     ??MT_AfIncomingMsg_10:
   \   0002D4                ; Setup parameters for call to function osal_memcpy
   \   0002D4   12....       LCALL   ?Subroutine24 & 0xFFFF
    751            }
   \                     ??CrossCallReturnLabel_41:
   \   0002D7   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0002DA   AC..         MOV     R4,?V0 + 6
   \   0002DC   AD..         MOV     R5,?V0 + 7
   \   0002DE   EE           MOV     A,R6
   \   0002DF   FA           MOV     R2,A
   \   0002E0   EF           MOV     A,R7
   \                     ??MT_AfIncomingMsg_11:
   \   0002E1   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_170:
   \   0002E4   12....       LCALL   ?DEALLOC_XSTACK8
    752          
    753            /* Build and send back the response */
    754            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ|(uint8)MT_RPC_SYS_AF), cmd, respLen, pRsp);
   \   0002E7                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0002E7   7407         MOV     A,#0x7
   \   0002E9   12....       LCALL   ?XSTACK_DISP0_8
   \   0002EC   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0002EF   AB..         MOV     R3,?V0 + 4
   \   0002F1   7404         MOV     A,#0x4
   \   0002F3   12....       LCALL   ?XSTACK_DISP0_8
   \   0002F6   E0           MOVX    A,@DPTR
   \   0002F7   FA           MOV     R2,A
   \   0002F8   7944         MOV     R1,#0x44
   \   0002FA   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    755          
    756            (void)osal_mem_free(pRsp);
   \   0002FD                ; Setup parameters for call to function osal_mem_free
   \   0002FD   7407         MOV     A,#0x7
   \                     ??MT_AfIncomingMsg_4:
   \   0002FF   12....       LCALL   ?XSTACK_DISP0_8
   \   000302   12....       LCALL   ?Subroutine20 & 0xFFFF
    757          }
   \                     ??CrossCallReturnLabel_36:
   \   000305   7409         MOV     A,#0x9
   \   000307                REQUIRE ?Subroutine1
   \   000307                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   8E82         MOV     DPL,R6
   \   000002   8F83         MOV     DPH,R7
   \   000004   E5..         MOV     A,?V0 + 0
   \   000006                REQUIRE ??Subroutine66_0
   \   000006                ; // Fall through to label ??Subroutine66_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine66_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   0E           INC     R6
   \   000003   AF83         MOV     R7,DPH
   \   000005   7405         MOV     A,#0x5
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   85..82       MOV     DPL,?V0 + 0
   \   000003   85..83       MOV     DPH,?V0 + 1
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F5..         MOV     ?V0 + 0,A
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F5..         MOV     ?V0 + 1,A
   \   00000D   78..         MOV     R0,#?V0 + 0
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   90....       MOV     DPTR,#pMtAfInMsgList
   \   000003                REQUIRE ??Subroutine69_0
   \   000003                ; // Fall through to label ??Subroutine69_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004                REQUIRE ??Subroutine70_0
   \   000004                ; // Fall through to label ??Subroutine70_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine70_0:
   \   000000   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_167:
   \   000003   F0           MOVX    @DPTR,A
   \   000004   0E           INC     R6
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine53:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002                REQUIRE ??Subroutine71_0
   \   000002                ; // Fall through to label ??Subroutine71_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine71_0:
   \   000000   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_150:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   F0           MOVX    @DPTR,A
   \   000008   A3           INC     DPTR
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000003   AE82         MOV     R6,DPL
   \   000005   AF83         MOV     R7,DPH
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   8882         MOV     DPL,R0
   \   000002   8983         MOV     DPH,R1
   \   000004                REQUIRE ??Subroutine73_0
   \   000004                ; // Fall through to label ??Subroutine73_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine73_0:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine74_0
   \   000001                ; // Fall through to label ??Subroutine74_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine74_0:
   \   000000   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_168:
   \   000003   F0           MOVX    @DPTR,A
   \   000004   A3           INC     DPTR
   \   000005   0E           INC     R6
   \   000006   AF83         MOV     R7,DPH
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000003   78..         MOV     R0,#?V0 + 0
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   0E           INC     R6
   \   000004   AF83         MOV     R7,DPH
   \   000006   85..82       MOV     DPL,?XSP + 0
   \   000009   85..83       MOV     DPH,?XSP + 1
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   12....       LCALL   ?Subroutine59 & 0xFFFF
   \                     ??CrossCallReturnLabel_214:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   8E82         MOV     DPL,R6
   \   000006   8F83         MOV     DPH,R7
   \   000008   F0           MOVX    @DPTR,A
   \   000009   A3           INC     DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine52:
   \   000000   12....       LCALL   ??Subroutine77_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_184:
   \   000003   A3           INC     DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   FB           MOV     R3,A
   \   000001                REQUIRE ??Subroutine75_0
   \   000001                ; // Fall through to label ??Subroutine75_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   EB           MOV     A,R3
   \   000004                REQUIRE ??Subroutine76_0
   \   000004                ; // Fall through to label ??Subroutine76_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine76_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_100:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_99:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine49:
   \   000000   12....       LCALL   ?Subroutine57 & 0xFFFF
   \                     ??CrossCallReturnLabel_183:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine57:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002                REQUIRE ??Subroutine77_0
   \   000002                ; // Fall through to label ??Subroutine77_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine77_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_149:
   \   000003   A3           INC     DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_98:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   12....       LCALL   ?Subroutine57 & 0xFFFF
   \                     ??CrossCallReturnLabel_182:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET
    758          
    759          /**************************************************************************************************
    760           * @fn          MT_AfDataRetrieve
    761           *
    762           * @brief   Process AF Data Retrieve command to incrementally read out a very large
    763           *          incoming AF message.
    764           *
    765           * input parameters
    766           *
    767           * @param pBuf - pointer to the received buffer
    768           *
    769           * output parameters
    770           *
    771           * @param rtrn - AF-Status of the operation.
    772           *
    773           * @return      None.
    774           **************************************************************************************************
    775           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    776          void MT_AfDataRetrieve(uint8 *pBuf)
   \                     MT_AfDataRetrieve:
    777          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   7401         MOV     A,#0x1
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   12....       LCALL   ?Subroutine39 & 0xFFFF
    778            #define MT_AF_RTV_HDR_SZ  2
    779          
    780            uint32 timestamp;
    781            mtAfInMsgList_t *pPrev, *pItem = pMtAfInMsgList;
   \                     ??CrossCallReturnLabel_71:
   \   000012   90....       MOV     DPTR,#pMtAfInMsgList
   \   000015   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_198:
   \   000018   7403         MOV     A,#0x3
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   12....       LCALL   ?Subroutine44 & 0xFFFF
    782            uint8 rtrn = afStatus_FAILED;
   \                     ??CrossCallReturnLabel_85:
   \   000020   7A01         MOV     R2,#0x1
    783            uint8 len = 0;
   \   000022   85..82       MOV     DPL,?XSP + 0
   \   000025   85..83       MOV     DPH,?XSP + 1
   \   000028   E4           CLR     A
   \   000029   F0           MOVX    @DPTR,A
    784          
    785            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00002A   04           INC     A
   \   00002B   12....       LCALL   ?XSTACK_DISP0_8
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   2403         ADD     A,#0x3
   \   000031   F8           MOV     R0,A
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   3400         ADDC    A,#0x0
   \   000036   F9           MOV     R1,A
   \   000037   EA           MOV     A,R2
   \   000038   12....       LCALL   ?XSTACK_DISP0_8
   \   00003B   12....       LCALL   ?Subroutine44 & 0xFFFF
    786            timestamp = BUILD_UINT32(pBuf[0], pBuf[1], pBuf[2], pBuf[3]);
   \                     ??CrossCallReturnLabel_86:
   \   00003E   EA           MOV     A,R2
   \   00003F   12....       LCALL   ?XSTACK_DISP0_8
   \   000042   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   000045   F5..         MOV     ?V0 + 0,A
   \   000047   E4           CLR     A
   \   000048   F5..         MOV     ?V0 + 1,A
   \   00004A   F5..         MOV     ?V0 + 2,A
   \   00004C   F5..         MOV     ?V0 + 3,A
   \   00004E   04           INC     A
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_148:
   \   000055   E0           MOVX    A,@DPTR
   \   000056   F5..         MOV     ?V0 + 4,A
   \   000058   E4           CLR     A
   \   000059   F5..         MOV     ?V0 + 5,A
   \   00005B   F5..         MOV     ?V0 + 6,A
   \   00005D   F5..         MOV     ?V0 + 7,A
   \   00005F   7408         MOV     A,#0x8
   \   000061   78..         MOV     R0,#?V0 + 4
   \   000063   12....       LCALL   ?L_SHL
   \   000066   78..         MOV     R0,#?V0 + 0
   \   000068   79..         MOV     R1,#?V0 + 4
   \   00006A   12....       LCALL   ?L_ADD
   \   00006D   EA           MOV     A,R2
   \   00006E   12....       LCALL   ?XSTACK_DISP0_8
   \   000071   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000074   F5..         MOV     ?V0 + 4,A
   \   000076   E4           CLR     A
   \   000077   F5..         MOV     ?V0 + 5,A
   \   000079   7410         MOV     A,#0x10
   \   00007B   78..         MOV     R0,#?V0 + 4
   \   00007D   12....       LCALL   ?L_SHL
   \   000080   78..         MOV     R0,#?V0 + 0
   \   000082   79..         MOV     R1,#?V0 + 4
   \   000084   12....       LCALL   ?L_ADD
   \   000087   EA           MOV     A,R2
   \   000088   12....       LCALL   ?XSTACK_DISP0_8
   \   00008B   E0           MOVX    A,@DPTR
   \   00008C   F8           MOV     R0,A
   \   00008D   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   000090   A3           INC     DPTR
   \   000091   E0           MOVX    A,@DPTR
   \   000092   F5..         MOV     ?V0 + 4,A
   \   000094   E4           CLR     A
   \   000095   F5..         MOV     ?V0 + 6,A
   \   000097   7418         MOV     A,#0x18
   \   000099   78..         MOV     R0,#?V0 + 4
   \   00009B   12....       LCALL   ?L_SHL
   \   00009E   78..         MOV     R0,#?V0 + 0
   \   0000A0   79..         MOV     R1,#?V0 + 4
   \   0000A2   12....       LCALL   ?L_ADD
   \   0000A5   8010         SJMP    ??CrossCallReturnLabel_87
    787          
    788            while (pItem != NULL)
    789            {
    790              pPrev = pItem;
    791              if (pItem->timestamp == timestamp)
    792              {
    793                break;
    794              }
    795              pItem = pItem->next;
   \                     ??MT_AfDataRetrieve_0:
   \   0000A7   7403         MOV     A,#0x3
   \   0000A9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AC   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   0000AF   7403         MOV     A,#0x3
   \   0000B1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B4   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   0000B7   7403         MOV     A,#0x3
   \   0000B9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BC   12....       LCALL   ??Subroutine78_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_190:
   \   0000BF   6076         JZ      ??MT_AfDataRetrieve_1
   \   0000C1   E8           MOV     A,R0
   \   0000C2   FC           MOV     R4,A
   \   0000C3   E9           MOV     A,R1
   \   0000C4   FD           MOV     R5,A
   \   0000C5   7403         MOV     A,#0x3
   \   0000C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CA   12....       LCALL   ??Subroutine71_0 & 0xFFFF
    796            }
   \                     ??CrossCallReturnLabel_145:
   \   0000CD   78..         MOV     R0,#?V0 + 0
   \   0000CF   12....       LCALL   ?L_EQ_X
   \   0000D2   70D3         JNZ     ??MT_AfDataRetrieve_0
    797          
    798            if (pItem != NULL)
    799            {
    800              uint16 idx;
    801              uint8 *pRsp;
    802          
    803              pBuf += 4;
   \   0000D4   EA           MOV     A,R2
   \   0000D5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D8   E0           MOVX    A,@DPTR
   \   0000D9   2404         ADD     A,#0x4
   \   0000DB   F8           MOV     R0,A
   \   0000DC   A3           INC     DPTR
   \   0000DD   E0           MOVX    A,@DPTR
   \   0000DE   3400         ADDC    A,#0x0
   \   0000E0   F9           MOV     R1,A
   \   0000E1   EA           MOV     A,R2
   \   0000E2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E5   12....       LCALL   ?Subroutine44 & 0xFFFF
    804              idx = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_88:
   \   0000E8   EA           MOV     A,R2
   \   0000E9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000EC   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   0000EF   FA           MOV     R2,A
   \   0000F0   7401         MOV     A,#0x1
   \   0000F2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F5   12....       LCALL   ??Subroutine77_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_181:
   \   0000F8   12....       LCALL   ?Subroutine23 & 0xFFFF
    805              len = pBuf[2];
   \                     ??CrossCallReturnLabel_39:
   \   0000FB   7401         MOV     A,#0x1
   \   0000FD   12....       LCALL   ?XSTACK_DISP0_8
   \   000100   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000103   12....       LCALL   ?Subroutine28 & 0xFFFF
    806          
    807              if (len == 0)  // Indication to delete the afIncomingMSGPacket.
   \                     ??CrossCallReturnLabel_48:
   \   000106   705F         JNZ     ??MT_AfDataRetrieve_2
    808              {
    809                if (pMtAfInMsgList == pItem)
   \   000108   7403         MOV     A,#0x3
   \   00010A   12....       LCALL   ?XSTACK_DISP0_8
   \   00010D   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000110   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_135:
   \   000113   7403         MOV     A,#0x3
   \   000115   12....       LCALL   ?XSTACK_DISP0_8
   \   000118   E0           MOVX    A,@DPTR
   \   000119   6A           XRL     A,R2
   \   00011A   7003         JNZ     ??MT_AfDataRetrieve_3
   \   00011C   A3           INC     DPTR
   \   00011D   E0           MOVX    A,@DPTR
   \   00011E   6B           XRL     A,R3
   \                     ??MT_AfDataRetrieve_3:
   \   00011F   7005         JNZ     ??MT_AfDataRetrieve_4
    810                {
    811                  pMtAfInMsgList = pItem->next;
   \   000121   90....       MOV     DPTR,#pMtAfInMsgList
   \   000124   8004         SJMP    ??MT_AfDataRetrieve_5
    812                }
    813                else
    814                {
    815                  pPrev->next = pItem->next;
   \                     ??MT_AfDataRetrieve_4:
   \   000126   8C82         MOV     DPL,R4
   \   000128   8D83         MOV     DPH,R5
    816                }
   \                     ??MT_AfDataRetrieve_5:
   \   00012A   12....       LCALL   ?Subroutine44 & 0xFFFF
    817                (void)osal_mem_free(pItem);
   \                     ??CrossCallReturnLabel_89:
   \   00012D                ; Setup parameters for call to function osal_mem_free
   \   00012D   7403         MOV     A,#0x3
   \   00012F   12....       LCALL   ?XSTACK_DISP0_8
   \   000132   12....       LCALL   ?Subroutine20 & 0xFFFF
    818                rtrn = afStatus_SUCCESS;
   \                     ??CrossCallReturnLabel_37:
   \   000135   7A00         MOV     R2,#0x0
    819              }
    820              else if ((pRsp = osal_mem_alloc(len + MT_AF_RTV_HDR_SZ)) == NULL)
    821              {
    822                rtrn = afStatus_MEM_FAIL;
    823                len = 0;
    824              }
    825              else
    826              {
    827                pRsp[0] = ZSuccess;
    828                pRsp[1] = len;
    829                (void)osal_memcpy(pRsp + MT_AF_RTV_HDR_SZ, pItem->data+idx, len);
    830                MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    831                                                     MT_AF_DATA_RETRIEVE, len + MT_AF_RTV_HDR_SZ, pRsp);
    832                (void)osal_mem_free(pRsp);
    833                return;
    834              }
    835            }
    836          
    837            pBuf[0] = rtrn;
   \                     ??MT_AfDataRetrieve_1:
   \   000137   7401         MOV     A,#0x1
   \   000139   12....       LCALL   ?XSTACK_DISP0_8
   \   00013C   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   00013F   EA           MOV     A,R2
   \   000140   12....       LCALL   ??Subroutine76_0 & 0xFFFF
    838            pBuf[1] = len;
   \                     ??CrossCallReturnLabel_177:
   \   000143   C0E0         PUSH    A
   \   000145   7401         MOV     A,#0x1
   \   000147   12....       LCALL   ?XSTACK_DISP0_8
   \   00014A   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   00014D   A3           INC     DPTR
   \   00014E   D0E0         POP     A
   \   000150   F0           MOVX    @DPTR,A
    839            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    840                                                 MT_AF_DATA_RETRIEVE, MT_AF_RTV_HDR_SZ, pBuf);
   \   000151                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000151   7401         MOV     A,#0x1
   \   000153   12....       LCALL   ?XSTACK_DISP0_8
   \   000156   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000159   7B02         MOV     R3,#0x2
   \   00015B   7A12         MOV     R2,#0x12
   \   00015D   7964         MOV     R1,#0x64
   \   00015F   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    841          }
   \                     ??MT_AfDataRetrieve_6:
   \   000162   7405         MOV     A,#0x5
   \   000164   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??MT_AfDataRetrieve_2:
   \   000167                ; Setup parameters for call to function osal_mem_alloc
   \   000167   2402         ADD     A,#0x2
   \   000169   FA           MOV     R2,A
   \   00016A   E4           CLR     A
   \   00016B   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   00016E   8A..         MOV     ?V0 + 0,R2
   \   000170   8B..         MOV     ?V0 + 1,R3
   \   000172   EA           MOV     A,R2
   \   000173   45..         ORL     A,?V0 + 1
   \   000175   700C         JNZ     ??MT_AfDataRetrieve_7
   \   000177   7A10         MOV     R2,#0x10
   \   000179   85..82       MOV     DPL,?XSP + 0
   \   00017C   85..83       MOV     DPH,?XSP + 1
   \   00017F   E4           CLR     A
   \   000180   F0           MOVX    @DPTR,A
   \   000181   80B4         SJMP    ??MT_AfDataRetrieve_1
   \                     ??MT_AfDataRetrieve_7:
   \   000183   8A82         MOV     DPL,R2
   \   000185   8B83         MOV     DPH,R3
   \   000187   E4           CLR     A
   \   000188   12....       LCALL   ??Subroutine76_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_178:
   \   00018B   8A82         MOV     DPL,R2
   \   00018D   8B83         MOV     DPH,R3
   \   00018F   A3           INC     DPTR
   \   000190   F0           MOVX    @DPTR,A
   \   000191                ; Setup parameters for call to function osal_memcpy
   \   000191   7403         MOV     A,#0x3
   \   000193   12....       LCALL   ?XSTACK_DISP0_8
   \   000196   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000199   2E           ADD     A,R6
   \   00019A   F5..         MOV     ?V0 + 4,A
   \   00019C   A3           INC     DPTR
   \   00019D   E0           MOVX    A,@DPTR
   \   00019E   3F           ADDC    A,R7
   \   00019F   F5..         MOV     ?V0 + 5,A
   \   0001A1   78..         MOV     R0,#?V0 + 4
   \   0001A3   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0001A6   7403         MOV     A,#0x3
   \   0001A8   12....       LCALL   ?XSTACK_DISP0_8
   \   0001AB   E0           MOVX    A,@DPTR
   \   0001AC   FC           MOV     R4,A
   \   0001AD   7D00         MOV     R5,#0x0
   \   0001AF   EA           MOV     A,R2
   \   0001B0   2402         ADD     A,#0x2
   \   0001B2   0A           INC     R2
   \   0001B3   0A           INC     R2
   \   0001B4   EB           MOV     A,R3
   \   0001B5   3400         ADDC    A,#0x0
   \   0001B7   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_171:
   \   0001BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001BD                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0001BD   AC..         MOV     R4,?V0 + 0
   \   0001BF   AD..         MOV     R5,?V0 + 1
   \   0001C1   85..82       MOV     DPL,?XSP + 0
   \   0001C4   85..83       MOV     DPH,?XSP + 1
   \   0001C7   E0           MOVX    A,@DPTR
   \   0001C8   2402         ADD     A,#0x2
   \   0001CA   FB           MOV     R3,A
   \   0001CB   7A12         MOV     R2,#0x12
   \   0001CD   7964         MOV     R1,#0x64
   \   0001CF   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   \   0001D2                ; Setup parameters for call to function osal_mem_free
   \   0001D2   AA..         MOV     R2,?V0 + 0
   \   0001D4   AB..         MOV     R3,?V0 + 1
   \   0001D6   12....       LCALL   ??osal_mem_free?relay
   \   0001D9   8087         SJMP    ??MT_AfDataRetrieve_6

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   000003   F8           MOV     R0,A
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   F9           MOV     R1,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000003   22           RET
    842          
    843          /**************************************************************************************************
    844           * @fn          MT_AfDataStore
    845           *
    846           * @brief   Process AF Data Store command to incrementally store the data buffer for very large
    847           *          outgoing AF message.
    848           *
    849           * input parameters
    850           *
    851           * @param pBuf - pointer to the received buffer
    852           *
    853           * output parameters
    854           *
    855           * @param rtrn - AF-Status of the operation.
    856           *
    857           * @return      None.
    858           **************************************************************************************************
    859           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    860          void MT_AfDataStore(uint8 *pBuf)
   \                     MT_AfDataStore:
    861          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    862            uint16 idx;
    863            uint8 len, rtrn = afStatus_FAILED;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   7401         MOV     A,#0x1
   \   000012   F0           MOVX    @DPTR,A
    864          
    865            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000013   12....       LCALL   ?Subroutine46 & 0xFFFF
    866            idx = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_90:
   \   000016   8A82         MOV     DPL,R2
   \   000018   8B83         MOV     DPH,R3
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   FC           MOV     R4,A
   \   00001C   A3           INC     DPTR
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   F9           MOV     R1,A
   \   00001F   EC           MOV     A,R4
   \   000020   12....       LCALL   ?Subroutine56 & 0xFFFF
    867            len = pBuf[2];
   \                     ??CrossCallReturnLabel_105:
   \   000023   8A82         MOV     DPL,R2
   \   000025   8B83         MOV     DPH,R3
   \   000027   A3           INC     DPTR
   \   000028   A3           INC     DPTR
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   F5..         MOV     ?V0 + 6,A
    868            pBuf += 3;
   \   00002C   12....       LCALL   ?Subroutine46 & 0xFFFF
    869          
    870            if (pMtAfDataReq == NULL)
   \                     ??CrossCallReturnLabel_91:
   \   00002F   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_195:
   \   000032   700B         JNZ     ??MT_AfDataStore_0
    871            {
    872              rtrn = afStatus_MEM_FAIL;
   \   000034   85..82       MOV     DPL,?XSP + 0
   \   000037   85..83       MOV     DPH,?XSP + 1
   \   00003A   7410         MOV     A,#0x10
   \   00003C   02....       LJMP    ??MT_AfDataStore_1 & 0xFFFF
    873            }
    874            else if (len == 0)  // Indication to send the message.
   \                     ??MT_AfDataStore_0:
   \   00003F   90....       MOV     DPTR,#pMtAfDataReq
   \   000042   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000045   F5..         MOV     ?V0 + 4,A
   \   000047   A3           INC     DPTR
   \   000048   E0           MOVX    A,@DPTR
   \   000049   F5..         MOV     ?V0 + 5,A
   \   00004B   E5..         MOV     A,?V0 + 6
   \   00004D   706B         JNZ     ??MT_AfDataStore_2
    875            {
    876              rtrn = AF_DataRequest(&(pMtAfDataReq->dstAddr), pMtAfDataReq->epDesc, pMtAfDataReq->cId,
    877                                      pMtAfDataReq->dataLen,  pMtAfDataReq->data,
    878                                    &(pMtAfDataReq->transId), pMtAfDataReq->txOpts, pMtAfDataReq->radius);
   \   00004F                ; Setup parameters for call to function AF_DataRequest
   \   00004F   90....       MOV     DPTR,#pMtAfDataReq
   \   000052   E0           MOVX    A,@DPTR
   \   000053   2416         ADD     A,#0x16
   \   000055   12....       LCALL   ??Subroutine80_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_208:
   \   000058   F5..         MOV     ?V0 + 0,A
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005F   90....       MOV     DPTR,#pMtAfDataReq
   \   000062   E0           MOVX    A,@DPTR
   \   000063   2414         ADD     A,#0x14
   \   000065   F5..         MOV     ?V0 + 0,A
   \   000067   A3           INC     DPTR
   \   000068   E0           MOVX    A,@DPTR
   \   000069   12....       LCALL   ??Subroutine68_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_129:
   \   00006C   78..         MOV     R0,#?V0 + 0
   \   00006E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000071   78..         MOV     R0,#?V0 + 4
   \   000073   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000076   90....       MOV     DPTR,#pMtAfDataReq
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   2412         ADD     A,#0x12
   \   00007C   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_158:
   \   00007F   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   000082   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_160:
   \   000085   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   000088   90....       MOV     DPTR,#pMtAfDataReq
   \   00008B   E0           MOVX    A,@DPTR
   \   00008C   2415         ADD     A,#0x15
   \   00008E   12....       LCALL   ??Subroutine80_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_209:
   \   000091   F9           MOV     R1,A
   \   000092   90....       MOV     DPTR,#pMtAfDataReq
   \   000095   E0           MOVX    A,@DPTR
   \   000096   240E         ADD     A,#0xe
   \   000098   12....       LCALL   ??Subroutine79_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_204:
   \   00009B   8A82         MOV     DPL,R2
   \   00009D   8B83         MOV     DPH,R3
   \   00009F   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   0000A2   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_206:
   \   0000A5   12....       LCALL   ??AF_DataRequest?relay
   \   0000A8   7409         MOV     A,#0x9
   \   0000AA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000AD   E9           MOV     A,R1
   \   0000AE   85..82       MOV     DPL,?XSP + 0
   \   0000B1   85..83       MOV     DPH,?XSP + 1
   \   0000B4   F0           MOVX    @DPTR,A
    879              (void)osal_mem_free(pMtAfDataReq);
   \   0000B5                ; Setup parameters for call to function osal_mem_free
   \   0000B5   12....       LCALL   ?Subroutine13 & 0xFFFF
    880              pMtAfDataReq = NULL;
    881            }
   \                     ??CrossCallReturnLabel_15:
   \   0000B8   8024         SJMP    ??MT_AfDataStore_1
    882            else
    883            {
    884              (void)osal_memcpy(pMtAfDataReq->data+idx, pBuf, len);
   \                     ??MT_AfDataStore_2:
   \   0000BA                ; Setup parameters for call to function osal_memcpy
   \   0000BA   8A..         MOV     ?V0 + 0,R2
   \   0000BC   8B..         MOV     ?V0 + 1,R3
   \   0000BE   75..00       MOV     ?V0 + 2,#0x0
   \   0000C1   78..         MOV     R0,#?V0 + 0
   \   0000C3   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000C6   AC..         MOV     R4,?V0 + 6
   \   0000C8   7D00         MOV     R5,#0x0
   \   0000CA   E5..         MOV     A,?V0 + 4
   \   0000CC   2E           ADD     A,R6
   \   0000CD   FA           MOV     R2,A
   \   0000CE   E5..         MOV     A,?V0 + 5
   \   0000D0   3F           ADDC    A,R7
   \   0000D1   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_172:
   \   0000D4   12....       LCALL   ?DEALLOC_XSTACK8
    885              rtrn = afStatus_SUCCESS;
   \   0000D7   85..82       MOV     DPL,?XSP + 0
   \   0000DA   85..83       MOV     DPH,?XSP + 1
   \   0000DD   E4           CLR     A
    886            }
   \                     ??MT_AfDataStore_1:
   \   0000DE   12....       LCALL   ?Subroutine38 & 0xFFFF
    887          
    888            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    889                                                                          MT_AF_DATA_STORE, 1, &rtrn);
   \                     ??CrossCallReturnLabel_63:
   \   0000E1   7B01         MOV     R3,#0x1
   \   0000E3   7A11         MOV     R2,#0x11
   \   0000E5   7964         MOV     R1,#0x64
   \   0000E7   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    890          }
   \   0000EA   7401         MOV     A,#0x1
   \   0000EC   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   EA           MOV     A,R2
   \   000001   2403         ADD     A,#0x3
   \   000003   0A           INC     R2
   \   000004   0A           INC     R2
   \   000005   0A           INC     R2
   \   000006   EB           MOV     A,R3
   \   000007   3400         ADDC    A,#0x0
   \   000009   FB           MOV     R3,A
   \   00000A   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfExec?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfExec

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfCommandProcessing?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfCommandProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfRegister?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfRegister

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataRequestSrcRtg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRequestSrcRtg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfIncomingMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfIncomingMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataRetrieve?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRetrieve

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataStore?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataStore
    891          
    892          /**************************************************************************************************
    893           * @fn          MT_AfAPSF_ConfigSet
    894           *
    895           * @brief       This function is the MT proxy for afAPSF_ConfigSet().
    896           *
    897           * input parameters
    898           *
    899           * @param       pBuf - Pointer to the received buffer.
    900           *
    901           * output parameters
    902           *
    903           * None.
    904           *
    905           * @return      None.
    906           */
    907          static void MT_AfAPSF_ConfigSet(uint8 *pBuf)
    908          {
    909            afAPSF_Config_t cfg = { pBuf[MT_RPC_POS_DAT0+1], pBuf[MT_RPC_POS_DAT0+2] };
    910            afStatus_t rtrn = afAPSF_ConfigSet(pBuf[MT_RPC_POS_DAT0], &cfg);
    911          
    912            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    913                                                 MT_AF_APSF_CONFIG_SET, 1, (uint8 *)&rtrn);
    914          }
    915          
    916          /***************************************************************************************************
    917          ***************************************************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     MT_AfCommandProcessing             1      0     12
       -> MT_AfRegister                 0      0     24
       -> MT_AfDataRequest              0      0     24
       -> MT_AfDataRequestSrcRtg        0      0     24
       -> MT_AfDataRetrieve             0      0     24
       -> MT_AfDataStore                0      0     24
       -> afAPSF_ConfigSet              0      0     24
       -> MT_BuildAndSendZToolResponse
                                        0      0     24
     MT_AfDataConfirm                   3      0      3
       -> MT_BuildAndSendZToolResponse
                                        4      0      6
     MT_AfDataRequest                   1      0     56
       -> osal_memcpy                   0      0     76
       -> afFindEndPointDesc            0      0     70
       -> osal_mem_alloc                0      0     70
       -> osal_memcpy                   0      0     76
       -> osal_start_timerEx            0      0     70
       -> osal_set_event                0      0     70
       -> AF_DataRequest                0      0     88
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_AfDataRequestSrcRtg             1      0     58
       -> osal_memset                   0      0     68
       -> afFindEndPointDesc            0      0     68
       -> osal_mem_alloc                0      0     68
       -> AF_DataRequestSrcRtg          0      0     92
       -> osal_mem_free                 0      0     68
       -> MT_BuildAndSendZToolResponse
                                        0      0     68
     MT_AfDataRetrieve                  1      0     36
       -> osal_mem_free                 0      0     42
       -> MT_BuildAndSendZToolResponse
                                        0      0     42
       -> osal_mem_alloc                0      0     42
       -> osal_memcpy                   0      0     48
       -> MT_BuildAndSendZToolResponse
                                        0      0     42
       -> osal_mem_free                 0      0     42
     MT_AfDataStore                     1      0     38
       -> AF_DataRequest                0      0     52
       -> osal_mem_free                 0      0     34
       -> osal_memcpy                   0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     34
     MT_AfExec                          0      0      9
       -> osal_mem_free                 0      0     18
       -> osal_mem_free                 0      0     18
       -> osal_mem_free                 0      0     18
       -> osal_start_timerEx            0      0     18
       -> osal_set_event                0      0     18
     MT_AfIncomingMsg                   1      0     28
       -> osal_mem_alloc                0      0     50
       -> osal_mem_alloc                0      0     50
       -> osal_mem_free                 0      0     50
       -> osal_memcpy                   0      0     56
       -> osal_start_timerEx            0      0     50
       -> osal_set_event                0      0     50
       -> osal_memcpy                   0      0     56
       -> osal_memcpy                   0      0     56
       -> MT_BuildAndSendZToolResponse
                                        0      0     50
       -> osal_mem_free                 0      0     50
     MT_AfRegister                      1      0     27
       -> osal_mem_alloc                0      0     30
       -> MT_BuildEndpointDesc          0      0     30
       -> afRegister                    0      0     30
       -> osal_mem_free                 0      0     30
       -> MT_BuildAndSendZToolResponse
                                        0      0     30


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     pMtAfInMsgList                    2
     pMtAfDataReq                      2
     MT_AfExec                       136
     ?Subroutine0                      5
     ?Subroutine43                     9
     ?Subroutine27                    13
     ??Subroutine65_0                 18
     ?Subroutine58                     5
     ?Subroutine16                     6
     ?Subroutine54                     4
     ?Subroutine59                    11
     ?Subroutine51                     6
     ?Subroutine50                     8
     ?Subroutine3                      3
     ??Subroutine78_0                  6
     ?Subroutine13                    13
     ?Subroutine8                      6
     ??Subroutine80_0                  5
     MT_AfCommandProcessing          166
     MT_AfRegister                   139
     ?Subroutine35                     9
     MT_AfDataRequest                722
     ?Subroutine42                     6
     ?Subroutine40                     2
     ??Subroutine61_0                  8
     ?Subroutine34                     4
     ?Subroutine55                    10
     ?Subroutine29                     5
     ??Subroutine62_0                  4
     ??Subroutine63_0                  4
     ??Subroutine64_0                 11
     ?Subroutine22                     3
     ?Subroutine36                     8
     ?Subroutine60                     9
     ?Subroutine32                     5
     ?Subroutine26                     8
     ?Subroutine17                     7
     ?Subroutine41                     7
     ?Subroutine1                      8
     ?Subroutine44                     6
     ?Subroutine39                     6
     ?Subroutine31                     1
     ??Subroutine67_0                  8
     ??Subroutine68_0                  5
     ?Subroutine30                     7
     ??Subroutine69_0                  5
     ?Subroutine9                      6
     ??Subroutine72_0                  4
     ??Subroutine75_0                  6
     ?Subroutine56                     7
     ?Subroutine25                     6
     ??Subroutine79_0                  7
     MT_AfDataRequestSrcRtg          411
     ?Subroutine23                     8
     MT_AfDataConfirm                 72
     ?Subroutine28                     9
     ?Subroutine38                    12
     MT_AfIncomingMsg                775
     ?Subroutine37                     6
     ??Subroutine66_0                  8
     ?Subroutine24                    16
     ?Subroutine21                     3
     ?Subroutine12                     4
     ??Subroutine70_0                  8
     ?Subroutine53                     6
     ?Subroutine11                     2
     ??Subroutine71_0                  7
     ?Subroutine10                    10
     ?Subroutine7                      8
     ?Subroutine5                      4
     ??Subroutine73_0                  1
     ??Subroutine74_0                  9
     ?Subroutine4                      6
     ?Subroutine2                     14
     ?Subroutine48                    11
     ?Subroutine52                     5
     ?Subroutine45                     1
     ?Subroutine33                     4
     ??Subroutine76_0                  9
     ?Subroutine20                     4
     ?Subroutine19                     4
     ?Subroutine49                     4
     ?Subroutine57                     2
     ??Subroutine77_0                  7
     ?Subroutine18                     5
     ?Subroutine6                      7
     ?Subroutine47                     5
     MT_AfDataRetrieve               475
     ?Subroutine14                     8
     ?Subroutine15                     4
     MT_AfDataStore                  239
     ?Subroutine46                    11
     ??MT_AfExec?relay                 6
     ??MT_AfCommandProcessing?relay    6
     ??MT_AfRegister?relay             6
     ??MT_AfDataRequest?relay          6
     ??MT_AfDataRequestSrcRtg?relay    6
     ??MT_AfDataConfirm?relay          6
     ??MT_AfIncomingMsg?relay          6
     ??MT_AfDataRetrieve?relay         6
     ??MT_AfDataStore?relay            6

 
 3 677 bytes in segment BANKED_CODE
    54 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_Z
 
 3 731 bytes of CODE  memory
     4 bytes of XDATA memory

Errors: none
Warnings: none
